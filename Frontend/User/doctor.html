<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MEDora is a modern healthcare solutions provider that offers a range of services to help you stay healthy and active.">
    <meta name="keywords" content="MEDora, healthcare, modern, solutions, services, health, active, modern healthcare solutions provider, stay healthy and active">
    <meta name="author" content="MEDora">
    <meta name="theme-color" content="#1CB5BD" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0D8A91" media="(prefers-color-scheme: dark)">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="bingbot" content="index, follow">
    <meta name="google" content="notranslate">
    <meta name="google-site-verification" content="your-verification-code">
    
    <title>Doctor Profile - MEDora</title>
    <link rel="icon" href="../assets/Icons/MEDora Logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <!-- Include Heroicons (if not already included) -->
    <script src="https://unpkg.com/feather-icons"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: "#1CB5BD", secondary: "#64b5f6" },
                    borderRadius: {
                        none: "0px",
                        sm: "4px",
                        DEFAULT: "8px",
                        md: "12px",
                        lg: "16px",
                        xl: "20px",
                        "2xl": "24px",
                        "3xl": "32px",
                        full: "9999px",
                        button: "8px",
                    },
                },
            },
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
    <!-- Include the chat component -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.4.0/fonts/remixicon.css">
    <style>
        :where([class^="ri-"])::before {
            content: "\f3c2";
        }

        body {
            font-family: 'Poppins', sans-serif;
        }

        .dropdown {
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
        }

        .dropdown-container:hover .dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* Mobile Menu Styles */
        .mobile-menu {
            display: none;
            position: fixed;
            top: 4rem;
            left: 0;
            right: 0;
            background: white;
            padding: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 100;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .mobile-menu.active {
            display: block;
        }

        /* Menu Links */
        .mobile-menu > a {
            display: block;
            padding: 0.75rem 0;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .mobile-menu > a:last-child {
            border-bottom: none;
        }

        .mobile-menu > a:hover {
            color: #1CB5BD;
        }

        /* Dropdown Toggle */
        .dropdown2 > a {
            display: flex;
            padding: 0.75rem 0;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .dropdown2 > a:hover {
            color: #1CB5BD;
        }

        /* Dropdown Content */
        .dropdown-content2 {
            display: none;
            background: #f9fafb;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
        }

        .dropdown-content2.active {
            display: block;
        }

        /* Grid Layout for Dropdown Items */
        .dropdown-content2 .grid {
            padding: 0.5rem;
        }

        .dropdown-content2 a {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            color: #374151;
            transition: all 0.3s ease;
            border-bottom: 1px solid #e5e7eb;
            border-left: 1px solid #e5e7eb;
            border-radius: 0.25rem;
        }

        .dropdown-content2 a:hover {
            background-color: #f3f4f6;
            color: #1CB5BD;
        }

        /* Arrow Animation */
        .rotate-180 {
            transform: rotate(180deg);
            transition: transform 0.3s ease;
        }


        /* Mobile menu button styles */
        #mobile-menu-button {
            cursor: pointer;
            transition: color 0.3s ease;
        }

        #mobile-menu-button:hover {
            color: #1CB5BD;
        }

        @media (min-width: 1075px) {
            html { font-size: 14px; }
        }
        @media (max-width: 1075px) {
            html { font-size: 12px; }
        }
        @media (max-width: 480px) {
            html { font-size: 10px; }
        }
        
        /* Additional styles for doctor profile */
        .doctor-badge {
            display: inline-flex;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            background-color: #e0f2fe;
            color: #0369a1;
            width: fit-content;
        }
        
        .availability-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
        
        .available {
            background-color: #10b981;
        }
        
        .unavailable {
            background-color: #ef4444;
        }
        
        .on-leave {
            background-color: #f59e0b;
        }
        
        .patient-search {
            transition: all 0.3s ease;
        }
        
        .patient-search:focus {
            box-shadow: 0 0 0 3px rgba(28, 181, 189, 0.2);
        }
        
        /* Consultation form styles */
        .consultation-form {
            transition: all 0.3s ease;
        }
        
        .consultation-form textarea {
            min-height: 120px;
        }
        
        /* Profile Page Specific Styles */
        .profile-tabs {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }
        
        .profile-tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: #6b7280;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .profile-tab.active {
            color: #1CB5BD;
            border-bottom-color: #1CB5BD;
        }
        
        .profile-tab:hover:not(.active) {
            color: #4b5563;
            border-bottom-color: #d1d5db;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Modal Animation */
        #confirmationModal {
            transition: opacity 0.3s ease;
        }

        #confirmationModal:not(.hidden) {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Alert Animation */
        #alertNotification {
            transition: all 0.3s ease;
            transform: translateX(100%);
        }

        #alertNotification:not(.hidden) {
            display: flex;
            animation: slideIn 0.3s ease forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* Profile and notification dropdown styles */
        #profile-dropdown, #notification-dropdown {
            animation: fadeIn 0.2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Notification badge pulse animation */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        #notification-btn span {
            animation: pulse 2s infinite;
        }

    </style>
</head>

<body class="bg-gray-50">
    <!-- Navbar -->
    <nav class="fixed top-0 left-0 right-0 bg-white shadow-md z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center md:space-x-4 lg:space-x-8 xl:space-x-10">
                    <div>
                        <a href="#" class="flex-shrink-0 flex items-center">
                            <i class="ri-stethoscope-line ri-2x text-primary mr-2"></i>
                            <span class="text-primary text-2xl font-['Pacifico']">MEDora</span>
                        </a>
                    </div>
                    <div class="hidden md:flex items-center md:space-x-1 lg:space-x-4 xl:space-x-8">
                        <a href="../Guests/home.html" class="text-gray-700 hover:text-primary px-1 pt-1 font-medium sm:text-xs md:text-sm lg:text-base xl:text-lg">Home</a>
                        <div class="dropdown-container relative">
                            <a href="#" id="services-menu"
                                class="text-gray-700 hover:text-primary px-1 pt-1 font-medium flex items-center sm:text-xs md:text-sm lg:text-base xl:text-lg whitespace-nowrap">
                                Our Services
                                <div class="w-5 h-5 flex items-center justify-center ml-1">
                                    <i id="services-arrow" class="ri-arrow-down-s-line transition-transform duration-300"></i>
                                </div>
                            </a>
                            <div id="services-dropdown"
                                class="hidden absolute left-0 mt-2 w-80 bg-white rounded shadow-lg p-4 z-50">
                                <div class="grid grid-cols-2 gap-3">
                                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                        <div
                                            class="w-8 h-8 flex items-center justify-center bg-red-100 rounded-full text-red-500">
                                            <i class="ri-heart-pulse-line"></i>
                                        </div>
                                        <span class="ml-2 text-sm">Emergency & Critical Care</span>
                                    </a>
                                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                        <div
                                            class="w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full text-blue-500">
                                            <i class="ri-medicine-bottle-line"></i>
                                        </div>
                                        <span class="ml-2 text-sm">Support Services</span>
                                    </a>
                                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                        <div
                                            class="w-8 h-8 flex items-center justify-center bg-purple-100 rounded-full text-purple-500">
                                            <i class="ri-hospital-line"></i>
                                        </div>
                                        <span class="ml-2 text-sm">Specialized Units</span>
                                    </a>
                                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                        <div
                                            class="w-8 h-8 flex items-center justify-center bg-green-100 rounded-full text-green-500">
                                            <i class="ri-parent-line"></i>
                                        </div>
                                        <span class="ml-2 text-sm">Maternity & Childcare</span>
                                    </a>
                                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                        <div
                                            class="w-8 h-8 flex items-center justify-center bg-yellow-100 rounded-full text-yellow-500">
                                            <i class="ri-stethoscope-line"></i>
                                        </div>
                                        <span class="ml-2 text-sm">Outpatient Services</span>
                                    </a>
                                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                        <div
                                            class="w-8 h-8 flex items-center justify-center bg-indigo-100 rounded-full text-indigo-500">
                                            <i class="ri-surgical-mask-line"></i>
                                        </div>
                                        <span class="ml-2 text-sm">Surgical Services</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <a href="../Guests/find-doctor.html" class="text-gray-700 hover:text-primary px-1 pt-1 font-medium sm:text-xs md:text-sm lg:text-base xl:text-lg whitespace-nowrap">Find Doctor</a>
                        <a href="../Guests/blog.html" class="text-gray-700 hover:text-primary px-1 pt-1 font-medium sm:text-xs md:text-sm lg:text-base xl:text-lg">Blog</a>
                        <a href="../Guests/reviews.html" class="text-gray-700 hover:text-primary px-1 pt-1 font-medium sm:text-xs md:text-sm lg:text-base xl:text-lg">Reviews</a>
                        <a href="../Guests/contact.html" class="text-gray-700 hover:text-primary px-1 pt-1 font-medium sm:text-xs md:text-sm lg:text-base xl:text-lg">Contact</a>
                    </div>
                </div>
                <div class="hidden md:flex items-center md:space-x-4 lg:space-x-6 xl:space-x-8">
                    <!-- Notification Button -->
                    <div class="relative">
                        <button id="notification-btn" class="p-2 rounded-full hover:bg-gray-100 relative">
                            <i class="ri-notification-3-line w-6 h-6 text-gray-600 text-xl"></i>
                            <span class="absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-white"></span>
                        </button>
                        <!-- Notification Dropdown -->
                        <div id="notification-dropdown" class="hidden absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg py-1 z-50">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <h3 class="text-sm font-medium text-gray-700">Notifications</h3>
                            </div>
                            <div class="max-h-60 overflow-y-auto">
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 pt-1">
                                            <i class="ri-calendar-check-line text-blue-500"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">Appointment Confirmed</p>
                                            <p class="text-xs text-gray-500">Your appointment with Dr. Smith is confirmed for tomorrow</p>
                                            <p class="text-xs text-gray-400 mt-1">2 hours ago</p>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 pt-1">
                                            <i class="ri-file-text-line text-green-500"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">New Test Results</p>
                                            <p class="text-xs text-gray-500">Your lab test results are now available</p>
                                            <p class="text-xs text-gray-400 mt-1">1 day ago</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="px-4 py-2 border-t border-gray-200">
                                <a href="#" class="text-xs font-medium text-primary hover:text-primary-dark">View all notifications</a>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Dropdown -->
                    <div class="relative ml-2">
                        <button id="profile-btn" class="flex items-center text-sm rounded-full focus:outline-none">
                            <img class="h-8 w-8 rounded-full object-cover" src="../assets/images/Dr. Sarah Johnson.jpg" alt="User profile">
                        </button>
                        <!-- Profile Dropdown Menu -->
                        <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <p class="text-sm font-medium text-gray-700">Dr. Sarah Johnson</p>
                                <p class="text-xs text-gray-500">Doctor</p>
                            </div>
                            <a href="doctor.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ri-user-line mr-2"></i> My Profile
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ri-settings-3-line mr-2"></i> Settings
                            </a>
                            <div class="border-t border-gray-200"></div>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ri-logout-box-r-line mr-2"></i> Sign out
                            </a>
                        </div>
                    </div>
                </div>
                <div class="flex md:hidden items-center">
                    <!-- Notification Button -->
                    <div class="relative mr-2">
                        <button id="mobile-notification-btn" class="p-2 rounded-full hover:bg-gray-100 relative">
                            <i class="ri-notification-3-line text-gray-600 text-xl"></i>
                            <span class="absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-white"></span>
                        </button>
                        <!-- Mobile Notification Dropdown -->
                        <div id="mobile-notification-dropdown" class="hidden absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg py-1 z-50">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <h3 class="text-sm font-medium text-gray-700">Notifications</h3>
                            </div>
                            <div class="max-h-60 overflow-y-auto">
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 pt-1">
                                            <i class="ri-calendar-check-line text-blue-500"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">Appointment Confirmed</p>
                                            <p class="text-xs text-gray-500">Your appointment with Dr. Smith is confirmed for tomorrow</p>
                                            <p class="text-xs text-gray-400 mt-1">2 hours ago</p>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 pt-1">
                                            <i class="ri-file-text-line text-green-500"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">New Test Results</p>
                                            <p class="text-xs text-gray-500">Your lab test results are now available</p>
                                            <p class="text-xs text-gray-400 mt-1">1 day ago</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="px-4 py-2 border-t border-gray-200">
                                <a href="#" class="text-xs font-medium text-primary hover:text-primary-dark">View all notifications</a>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Button -->
                    <div class="relative mr-2">
                        <button id="mobile-profile-btn" class="flex items-center text-sm rounded-full focus:outline-none">
                            <img class="h-8 w-8 rounded-full object-cover" src="../assets/images/Admin pages/Doctors page/Milla Willow_Admin.jpg" alt="User profile">
                        </button>
                        <!-- Mobile Profile Dropdown -->
                        <div id="mobile-profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <p class="text-sm font-medium text-gray-700">Milla Willow</p>
                                <p class="text-xs text-gray-500">Patient</p>
                            </div>
                            <a href="doctor.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ri-user-line mr-2"></i> Your Profile
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ri-settings-3-line mr-2"></i> Settings
                            </a>
                            <div class="border-t border-gray-200"></div>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ri-logout-box-r-line mr-2"></i> Sign out
                            </a>
                        </div>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="p-2 rounded-md text-gray-700 hover:text-primary focus:outline-none">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i id="menu-icon" class="ri-menu-line ri-lg transition-transform duration-300"></i>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-16 pb-16 mt-16 mb-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

        <!-- Doctor Information Card -->
        <div class="container grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="card bg-white p-4 rounded-lg shadow-md w-full col-span-2">
                <div class="card-title text-2xl font-bold mb-4 text-primary border-b-2 border-blue-300 pb-2">
                    <h2>
                        <i class="ri-user-3-line ri-1x text-primary"></i>
                        Doctor Information
                    </h2>
                </div>

                <div class="grid grid-cols-1 gap-6 items-start">
                    <!-- Above: Photo, ID, Name -->
                    <div class="flex flex-col items-center">
                        <div class="doctor-photo w-24 h-24 rounded-full overflow-hidden mb-4 border-4 border-blue-100 shadow">
                            <img src="../assets/images/Dr. Sarah Johnson.jpg" 
                                alt="Doctor Profile" 
                                class="w-full h-full object-cover">
                        </div>
                        <div class="doctor-NameId text-center">
                            <p class="text-sm text-gray-500 flex items-center gap-1 justify-center">
                                <i data-feather="hash" class="w-4 h-4 text-teal-500"></i> DOC-C001
                            </p>
                            <p class="text-2xl font-bold text-primary mt-1">Dr. Sarah Johnson</p>
                            <p class="text-sm text-gray-600 mt-1">Cardiologist</p>
                            <div class="mt-2 flex justify-center">
                                <span class="doctor-badge flex items-center">
                                    <span class="availability-indicator available mr-2"></span>
                                    Available Today
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Below: Details with Icons -->
                    <div class="grid grid-cols-1 gap-6 p-2">
                        <!-- Row 1: Specialization, Experience, Department -->
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500 flex items-center gap-1">
                                    <i data-feather="award" class="w-4 h-4 text-teal-500"></i> Specialization
                                </p>
                                <p class="font-semibold text-gray-800">Cardiology</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500 flex items-center gap-1">
                                    <i data-feather="briefcase" class="w-4 h-4 text-teal-500"></i> Experience
                                </p>
                                <p class="font-semibold text-gray-800">12 years</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500 flex items-center gap-1">
                                    <i data-feather="home" class="w-4 h-4 text-teal-500"></i> Department
                                </p>
                                <p class="font-semibold text-gray-800">Cardiology</p>
                            </div>
                        </div>

                        <!-- Row 2: Phone, Email, Address -->
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500 flex items-center gap-1">
                                    <i data-feather="phone" class="w-4 h-4 text-teal-500"></i> Phone
                                </p>
                                <p class="font-semibold text-gray-800">+1 234 567 891</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500 flex items-center gap-1">
                                    <i data-feather="mail" class="w-4 h-4 text-teal-500"></i> Email
                                </p>
                                <p class="font-semibold text-gray-800 break-words">sarah.johnson@medora.com</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500 flex items-center gap-1">
                                    <i data-feather="map-pin" class="w-4 h-4 text-teal-500"></i> Office
                                </p>
                                <p class="font-semibold text-gray-800">Room 205, Cardiology Wing</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule & Availability Card -->
            <div class="card bg-white p-6 rounded-lg shadow-md w-full col-span-1">
                <div class="card-title text-2xl font-bold mb-4 text-primary border-b-2 border-blue-300 pb-2">
                    <h2>
                        <i class="ri-calendar-line ri-1x text-primary"></i>
                        Schedule & Availability
                    </h2>
                </div>

                <div class="grid grid-cols-1 gap-6">
                    <!-- Weekly Schedule -->
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-gray-700 flex items-center">
                            <i data-feather="calendar" class="w-5 h-5 text-teal-500 mr-2"></i>
                            Weekly Schedule
                        </h3>
                        <div class="grid grid-cols-2 gap-4 ml-4">
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500">Monday - Friday</p>
                                <p class="font-semibold text-gray-800">9:00 AM - 5:00 PM</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500">Saturday</p>
                                <p class="font-semibold text-gray-800">10:00 AM - 2:00 PM</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500">Sunday</p>
                                <p class="font-semibold text-gray-800">Closed</p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-sm text-gray-500">Lunch Break</p>
                                <p class="font-semibold text-gray-800">1:00 PM - 2:00 PM</p>
                            </div>
                        </div>
                    </div>

                    <!-- Current Availability -->
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-gray-700 flex items-center">
                            <i data-feather="clock" class="w-5 h-5 text-teal-500 mr-2"></i>
                            Current Availability
                        </h3>
                        <div class="ml-4">
                            <div class="flex items-center mb-2">
                                <span class="availability-indicator available mr-2"></span>
                                <span class="text-sm font-medium text-gray-800">Available for consultations</span>
                            </div>
                            <div class="flex items-center">
                                <span class="availability-indicator available mr-2"></span>
                                <span class="text-sm font-medium text-gray-800">Next available slot: Today 3:00 PM</span>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button id="main-update-availability" class="w-full px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark transition duration-300 text-sm">
                                <i class="ri-edit-line mr-1"></i> Update Availability
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Tabs Navigation -->
        <div class="bg-white rounded-lg shadow-md mb-6">
            <div class="profile-tabs flex justify-between mx-10 overflow-x-auto overflow-y-hidden">
                <div class="profile-tab active" data-tab="patients">
                    <i class="ri-group-line mr-2"></i>My Patients
                </div>
                <div class="profile-tab" data-tab="appointments">
                    <i class="ri-calendar-line mr-2"></i>Appointments
                </div>
                <div class="profile-tab" data-tab="prescriptions">
                    <i class="ri-medicine-bottle-line mr-2"></i>Prescriptions
                </div>
                <div class="profile-tab" data-tab="medical-records">
                    <i class="ri-file-text-line mr-2"></i>Medical Records
                </div>
                <div class="profile-tab" data-tab="settings">
                    <i class="ri-settings-3-line mr-2"></i>Settings
                </div>
            </div>
        </div>

        <!-- Tab Contents -->
        <div class="tab-contents">
            <!-- Patients Tab -->
            <div id="patients" class="tab-content active">
                <!-- Patient Search and Advanced Filter -->
                <div class="card bg-white p-6 rounded-lg shadow-md mb-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <!-- Search Input -->
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="ri-search-line text-gray-400"></i>
                            </div>
                            <input
                                type="text"
                                id="patient-search-input"
                                class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                                placeholder="Search patients by name, ID, or condition..."
                                aria-label="Search patients"
                            >
                        </div>
                        <!-- Advanced Filter Toggle -->
                        <button
                            id="toggle-advanced-filter"
                            class="text-sm text-primary bg-primary hover:bg-primary-dark border-primary hover:border-primary-dark text-white rounded-button px-4 py-2"
                        >
                            Advanced Filters
                            <i id="toggle-icon" class="ri-arrow-down-s-line"></i>
                        </button>
                    </div>

                    <!-- Advanced Filter Section (hidden by default) -->
                    <div id="advanced-filter-section" class="mt-4 advanced-filter-container hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Gender Filter -->
                            <select id="patient-gender-filter" class="border rounded-md p-2 text-sm">
                                <option value="">All Genders</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
            
                            <!-- Date Filter -->
                            <input
                                type="date"
                                id="patient-date-filter"
                                class="border rounded-md p-2 text-sm"
                            >
                        </div>
                        <button
                            id="clear-patient-filters"
                            class="mt-4 text-sm text-primary underline hover:text-red-500"
                        >
                            Clear Filters
                        </button>
                    </div>
                </div>
            
                <!-- Patients List -->
                <div class="card bg-white p-6 rounded-lg shadow-md mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 flex items-center">
                            <i class="ri-group-line text-primary mr-2"></i>
                            Patient List
                        </h3>
                        <div class="text-sm text-gray-500">
                            Showing <span id="patient-showing-range" class="font-medium">1-5</span> of
                            <span id="patient-total-count" class="font-medium">24</span> patients
                        </div>
                    </div>
            
                    <!-- Scrollable Table -->
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-btn" data-column="name">
                                        Patient <i class="ri-arrow-up-down-line ml-1 text-xs"></i>
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-btn" data-column="id">
                                        ID <i class="ri-arrow-up-down-line ml-1 text-xs"></i>
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-btn" data-column="age">
                                        Age <i class="ri-arrow-up-down-line ml-1 text-xs"></i>
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-btn" data-column="lastVisit">
                                        Last Visit <i class="ri-arrow-up-down-line ml-1 text-xs"></i>
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-btn" data-column="condition">
                                        Condition <i class="ri-arrow-up-down-line ml-1 text-xs"></i>
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="patients-tbody" class="bg-white divide-y divide-gray-200">
                                <!-- JS will dynamically insert patient rows here -->
                            </tbody>
                        </table>
                    </div>
            
                    <!-- Pagination -->
                    <div class="mt-6 flex items-center justify-between">
                        <!-- Mobile Pagination Buttons -->
                        <div class="flex-1 flex justify-between sm:hidden">
                            <button id="patient-prev-mobile" class="px-4 py-2 border text-sm rounded-md text-gray-700 bg-white hover:bg-gray-50">Previous</button>
                            <button id="patient-next-mobile" class="ml-3 px-4 py-2 border text-sm rounded-md text-gray-700 bg-white hover:bg-gray-50">Next</button>
                        </div>
                
                        <!-- Desktop Pagination -->
                        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                            <p class="text-sm text-gray-700">
                                Showing <span id="patient-showing-range" class="font-medium">1-5</span> of
                            <span id="patient-total-count" class="font-medium">24</span> patients
                            </p>
                            <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                <button id="patient-prev-btn" class="px-2 py-2 rounded-l-md border bg-white text-sm text-gray-500 hover:bg-gray-50">
                                    <span class="sr-only">Previous</span>
                                    <i class="ri-arrow-left-s-line"></i>
                                </button>
                                <div id="patient-page-numbers" class="flex"></div>
                                <button id="patient-next-btn" class="px-2 py-2 rounded-r-md border bg-white text-sm text-gray-500 hover:bg-gray-50">
                                    <span class="sr-only">Next</span>
                                    <i class="ri-arrow-right-s-line"></i>
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Appointments Tab -->
            <div id="appointments" class="tab-content">
                <div class="card bg-white p-6 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 flex items-center">
                            <i class="ri-calendar-line text-primary mr-2"></i>
                            Appointments
                        </h3>
                        <div class="flex space-x-2">
                            <select class="block w-full md:w-auto pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md">
                                <option>Today</option>
                                <option>This Week</option>
                                <option>This Month</option>
                                <option selected>All Upcoming</option>
                            </select>
                            <button class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark transition duration-300 text-sm">
                                <i class="ri-add-line mr-1"></i> New Appointment
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date & Time</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Purpose</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">2025-05-20 10:00 AM</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10">
                                                <img class="h-10 w-10 rounded-full object-cover" src="../assets/images/Admin pages/Doctors page/Milla Willow_Admin.jpg" alt="Patient">
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">Milla Willow</div>
                                                <div class="text-sm text-gray-500">ID: MDF-P001</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Hypertension Follow-up</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Confirmed</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-primary hover:text-primary-dark mr-3"><i class="ri-eye-line"></i></a>
                                        <a href="#" class="text-teal-500 hover:text-blue-700 mr-3"><i class="ri-edit-line"></i></a>
                                        <a href="#" class="text-red-500 hover:text-red-700 decline-btn"><i class="ri-close-circle-line"></i></a>
                                    </td>
                                </tr>
                                <!-- More appointment rows... -->
                            </tbody>
                            <!-- <tbody class="bg-white divide-y divide-gray-200" id="appointments-table-body">
                                <!-- Appointments will be dynamically inserted here -->
                            <!-- </tbody>  -->
                        </table>
                    </div>
                </div>
            </div>

            <!-- Prescriptions Tab -->
            <div id="prescriptions" class="tab-content">
                <div class="card bg-white p-6 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 flex items-center">
                            <i class="ri-medicine-bottle-line text-primary mr-2"></i>
                            Prescriptions
                        </h3>
                        <button class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark transition duration-300 text-sm">
                            <i class="ri-add-line mr-1"></i> New Prescription
                        </button>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Medication</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">2025-04-15</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10">
                                                <img class="h-10 w-10 rounded-full object-cover" src="../assets/images/Admin pages/Doctors page/Milla Willow_Admin.jpg" alt="Patient">
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">Milla Willow</div>
                                                <div class="text-sm text-gray-500">ID: MDF-P001</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Lisinopril 10mg</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-primary hover:text-primary-dark mr-3"><i class="ri-eye-line"></i></a>
                                        <a href="#" class="text-teal-500 hover:text-blue-700 mr-3"><i class="ri-edit-line"></i></a>
                                        <a href="#" class="text-red-500 hover:text-red-700"><i class="ri-printer-line"></i></a>
                                    </td>
                                </tr>
                                <!-- More prescription rows... -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Medical Records Tab -->
            <div id="medical-records" class="tab-content">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <!-- Quick Patient Access -->
                    <div class="card bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 flex items-center">
                                <i class="ri-search-line text-primary mr-2"></i>
                                Patient Records
                            </h3>
                        </div>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="ri-search-line text-gray-400"></i>
                            </div>
                            <input type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm" placeholder="Search patient records...">
                        </div>
                        <div class="mt-4 space-y-3">
                            <a href="#" class="flex items-center p-2 rounded hover:bg-gray-50">
                                <div class="flex-shrink-0 h-10 w-10">
                                    <img class="h-10 w-10 rounded-full object-cover" src="../assets/images/Admin pages/Doctors page/Milla Willow_Admin.jpg" alt="Patient">
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-gray-900">Milla Willow</p>
                                    <p class="text-xs text-gray-500">Hypertension, Type 2 Diabetes</p>
                                </div>
                            </a>
                            <!-- More recent patient records... -->
                        </div>
                    </div>

                    <!-- Quick Add Forms -->
                    <div class="card bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 flex items-center">
                                <i class="ri-add-circle-line text-primary mr-2"></i>
                                Quick Add
                            </h3>
                        </div>
                        <div class="space-y-4">
                            <button class="w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <span class="text-sm font-medium text-gray-800">New Diagnosis</span>
                                <i class="ri-arrow-right-line text-gray-400"></i>
                            </button>
                            <button class="w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <span class="text-sm font-medium text-gray-800">New Prescription</span>
                                <i class="ri-arrow-right-line text-gray-400"></i>
                            </button>
                            <button class="w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <span class="text-sm font-medium text-gray-800">New Treatment Plan</span>
                                <i class="ri-arrow-right-line text-gray-400"></i>
                            </button>
                            <button class="w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <span class="text-sm font-medium text-gray-800">New Lab Order</span>
                                <i class="ri-arrow-right-line text-gray-400"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="card bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 flex items-center">
                                <i class="ri-history-line text-primary mr-2"></i>
                                Recent Activity
                            </h3>
                            <button class="text-primary hover:text-primary-dark text-sm font-medium">
                                View All
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-start">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full text-blue-500">
                                        <i class="ri-file-text-line"></i>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-gray-800">Added diagnosis for Milla Willow</p>
                                    <p class="text-xs text-gray-500">Hypertension - 2025-04-15</p>
                                </div>
                            </div>
                            <!-- More activity items... -->
                        </div>
                    </div>
                </div>

                <!-- Consultation Form -->
                <div class="card bg-white p-6 rounded-lg shadow-md mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 flex items-center">
                            <i class="ri-edit-line text-primary mr-2"></i>
                            Consultation Form
                        </h3>
                        <div class="flex items-center space-x-2">
                            <select class="block w-full md:w-auto pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md">
                                <option selected>Milla Willow</option>
                                <option>John Smith</option>
                                <option>Emma Johnson</option>
                            </select>
                            <button class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark transition duration-300 text-sm">
                                <i class="ri-save-line mr-1"></i> Save
                            </button>
                        </div>
                    </div>
                    
                    <div class="consultation-form grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Diagnosis</label>
                            <textarea class="w-full border border-gray-300 rounded-md p-3 focus:ring-primary focus:border-primary" placeholder="Enter diagnosis details..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Treatment Plan</label>
                            <textarea class="w-full border border-gray-300 rounded-md p-3 focus:ring-primary focus:border-primary" placeholder="Enter treatment plan..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Prescription</label>
                            <textarea class="w-full border border-gray-300 rounded-md p-3 focus:ring-primary focus:border-primary" placeholder="Enter prescription details..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                            <textarea class="w-full border border-gray-300 rounded-md p-3 focus:ring-primary focus:border-primary" placeholder="Enter consultation notes..."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="card bg-white p-6 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 flex items-center">
                            <i class="ri-settings-3-line text-primary mr-2"></i>
                            Account Settings
                        </h3>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Personal Information -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-medium text-gray-800">Personal Information</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Email</label>
                                    <input type="email" value="sarah.johnson@medora.com" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Phone</label>
                                    <input type="tel" value="+1 234 567 891" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Office Location</label>
                                    <input type="text" value="Room 205, Cardiology Wing" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                                </div>
                            </div>
                        </div>

                        <!-- Schedule Settings -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-medium text-gray-800">Schedule Settings</h4>
                            <div class="space-y-4">
                                <div class="flex items-center">
                                    <input type="checkbox" checked class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <label class="ml-2 block text-sm text-gray-700">Auto-confirm appointments</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" checked class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <label class="ml-2 block text-sm text-gray-700">Send appointment reminders</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <label class="ml-2 block text-sm text-gray-700">Allow online scheduling</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Availability Settings -->
                    <div class="mt-6">
                        <h4 class="text-lg font-medium text-gray-800 mb-4">Weekly Availability</h4>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            <div class="border rounded-lg p-4">
                                <h5 class="font-medium text-gray-800 mb-2">Monday</h5>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Morning</span>
                                        <span class="text-sm font-medium">9:00 AM - 12:00 PM</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Afternoon</span>
                                        <span class="text-sm font-medium">2:00 PM - 5:00 PM</span>
                                    </div>
                                </div>
                            </div>
                            <!-- More days... -->
                        </div>
                    </div>

                    <div class="mt-6 flex justify-end">
                        <button class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark transition duration-300">
                            Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Reviews Section & Doctor Schedule Calendar Section -->
        <div class="mt-8">
            <!-- Reviews Section -->
            <div class="mt-8 bg-white rounded-lg shadow-sm p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">Patient Reviews</h2>
                    <div class="flex items-center">
                        <div class="flex items-center mr-4">
                            <div class="flex text-yellow-400">
                                <i class="ri-star-fill"></i>
                                <i class="ri-star-fill"></i>
                                <i class="ri-star-fill"></i>
                                <i class="ri-star-fill"></i>
                                <i class="ri-star-half-fill"></i>
                            </div>
                            <span class="text-gray-600 ml-2">4.8 (56 reviews)</span>
                        </div>
                        <select id="review-filter" class="py-1 px-3 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary">
                            <option value="all">All Reviews</option>
                            <option value="5">5 Stars</option>
                            <option value="4">4 Stars</option>
                            <option value="3">3 Stars</option>
                            <option value="2">2 Stars</option>
                            <option value="1">1 Star</option>
                        </select>
                    </div>
                </div>
                
                <div id="reviews-container" class="space-y-6">
                    <!-- Review 1 -->
                    <!-- <div class="review-item border-b border-gray-200 pb-6" data-rating="5">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start">
                                <img src="../assets/images/patients/patient1.jpg" alt="Patient" class="h-10 w-10 rounded-full object-cover">
                                <div class="ml-4">
                                    <h4 class="text-md font-medium text-gray-900">James Peterson</h4>
                                    <div class="flex text-yellow-400 mt-1">
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                    </div>
                                </div>
                            </div>
                            <span class="text-sm text-gray-500">2 weeks ago</span>
                        </div>
                        <p class="mt-3 text-gray-700">Dr. Johnson is exceptional! She took the time to thoroughly explain my condition and treatment options. Her approach is both professional and compassionate, making me feel at ease during my appointments. Highly recommend!</p>
                    </div> -->
                    
                    <!-- Review 2 -->
                    <!-- <div class="review-item border-b border-gray-200 pb-6" data-rating="4">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start">
                                <img src="../assets/images/patients/patient2.jpg" alt="Patient" class="h-10 w-10 rounded-full object-cover">
                                <div class="ml-4">
                                    <h4 class="text-md font-medium text-gray-900">Sarah Williams</h4>
                                    <div class="flex text-yellow-400 mt-1">
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-line"></i>
                                    </div>
                                </div>
                            </div>
                            <span class="text-sm text-gray-500">1 month ago</span>
                        </div>
                        <p class="mt-3 text-gray-700">I've been a patient of Dr. Johnson for over a year now, and she's always been attentive and knowledgeable. The only reason for 4 stars instead of 5 is sometimes the wait times can be a bit long. Otherwise, her medical care is top-notch!</p>
                    </div> -->
                    
                    <!-- Review 3 -->
                    <!-- <div class="review-item border-b border-gray-200 pb-6" data-rating="5">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start">
                                <img src="../assets/images/patients/patient3.jpg" alt="Patient" class="h-10 w-10 rounded-full object-cover">
                                <div class="ml-4">
                                    <h4 class="text-md font-medium text-gray-900">Michael Rodriguez</h4>
                                    <div class="flex text-yellow-400 mt-1">
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                    </div>
                                </div>
                            </div>
                            <span class="text-sm text-gray-500">2 months ago</span>
                        </div>
                        <p class="mt-3 text-gray-700">Dr. Johnson literally saved my life. After multiple misdiagnoses from other doctors, she quickly identified my heart condition and got me the treatment I needed. She explains everything clearly and follows up regularly. I can't recommend her enough!</p>
                    </div> -->
                    
                    <!-- Review 4 -->
                    <!-- <div class="review-item pb-6" data-rating="3">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start">
                                <img src="../assets/images/patients/patient4.jpg" alt="Patient" class="h-10 w-10 rounded-full object-cover">
                                <div class="ml-4">
                                    <h4 class="text-md font-medium text-gray-900">Emma Chen</h4>
                                    <div class="flex text-yellow-400 mt-1">
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-line"></i>
                                        <i class="ri-star-line"></i>
                                    </div>
                                </div>
                            </div>
                            <span class="text-sm text-gray-500">3 months ago</span>
                        </div>
                        <p class="mt-3 text-gray-700">Dr. Johnson is knowledgeable but her office staff could be more organized. I've had issues with scheduling and billing more than once. The medical care itself is good, but the administrative side needs improvement.</p>
                    </div> -->
                    <!-- Reviews will be inserted here by JavaScript -->
                </div>
                
                <!-- Pagination Info -->
                <div class="mt-6 flex items-center justify-between">
                    <div class="flex-1 flex justify-between sm:hidden">
                        <button id="prev-mobile" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"> Previous </button>
                        <button id="next-mobile" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"> Next </button>
                    </div>
                    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                        <div>
                            <p class="text-sm text-gray-700">
                                Showing <span class="font-medium" id="showing-range-lg">15</span> of <span class="font-medium" id="total-reviews">0</span> patients
                            </p>
                        </div>
                        <div>
                            <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                <button id="prev-btn" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                    <span class="sr-only">Previous</span>
                                    <i class="ri-arrow-left-s-line"></i>
                                </button>
                                <div id="page-numbers" class="flex">
                                    <!-- Page numbers inserted dynamically -->
                                </div>
                                <button id="next-btn" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                    <span class="sr-only">Next</span>
                                    <i class="ri-arrow-right-s-line"></i>
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>

            </div>
            
            <!-- Doctor Schedule Calendar Section -->
            <div class="mt-8 bg-white rounded-lg shadow-sm p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">Doctor Schedule</h2>
                    <div class="flex space-x-2">
                        <button id="prev-month" class="p-2 rounded-full hover:bg-gray-100">
                            <i class="ri-arrow-left-s-line text-gray-600"></i>
                        </button>
                        <span id="current-month" class="text-gray-800 font-medium flex items-center"></span>
                        <button id="next-month" class="p-2 rounded-full hover:bg-gray-100">
                            <i class="ri-arrow-right-s-line text-gray-600"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Calendar View -->
                <div id="calendar-container">
                    <div class="grid grid-cols-7 gap-px bg-gray-200">
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Sun</div>
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Mon</div>
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Tue</div>
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Wed</div>
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Thu</div>
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Fri</div>
                        <div class="bg-white p-2 text-center text-sm font-medium text-gray-500">Sat</div>
                    </div>
                    <div id="calendar-days" class="grid grid-cols-7 gap-px bg-gray-200">
                        <!-- Calendar days will be generated via JavaScript -->
                    </div>
                </div>
                
                <!-- Legend -->
                <div class="flex items-center justify-center mt-6 space-x-6">
                    <div class="flex items-center">
                        <div class="w-4 h-4 rounded-full bg-blue-100 border border-blue-300 mr-2"></div>
                        <span class="text-sm text-gray-600">Available</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 rounded-full bg-green-100 border border-green-300 mr-2"></div>
                        <span class="text-sm text-gray-600">Confirmed Appointment</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 rounded-full bg-yellow-100 border border-yellow-300 mr-2"></div>
                        <span class="text-sm text-gray-600">Pending Appointment</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 rounded-full bg-red-100 border border-red-300 mr-2"></div>
                        <span class="text-sm text-gray-600">Unavailable</span>
                    </div>
                </div>
                
                <!-- Upcoming Appointments Today -->
                <div id="today-appointments" class="mt-8 hidden">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Today's Appointments</h3>
                    <div id="today-appointments-list" class="space-y-4">
                        <!-- Appointments will be added dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
                <div>
                    <a href="#" class="text-2xl font-['Pacifico'] text-white mb-4 inline-block">MEDora</a>
                    <p class="text-gray-400 mb-6">Providing advanced healthcare solutions with compassion and excellence
                        since 2010.</p>
                    <div class="flex space-x-4">
                        <a href="#"
                            class="w-10 h-10 flex items-center justify-center bg-gray-800 rounded-full hover:bg-primary transition duration-300">
                            <i class="ri-facebook-fill"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 flex items-center justify-center bg-gray-800 rounded-full hover:bg-primary transition duration-300">
                            <i class="ri-twitter-x-fill"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 flex items-center justify-center bg-gray-800 rounded-full hover:bg-primary transition duration-300">
                            <i class="ri-instagram-fill"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 flex items-center justify-center bg-gray-800 rounded-full hover:bg-primary transition duration-300">
                            <i class="ri-linkedin-fill"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-3">
                        <li><a href="home.html" class="text-gray-400 hover:text-white transition duration-300">Home</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">About Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Our Services</a>
                        </li>
                        <li><a href="find-doctor.html" class="text-gray-400 hover:text-white transition duration-300">Find a Doctor</a>
                        </li>
                        <li><a href="blog.html" class="text-gray-400 hover:text-white transition duration-300">Blog</a></li>
                        <li><a href="contact.html" class="text-gray-400 hover:text-white transition duration-300">Contact Us</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Our Services</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Emergency
                                Care</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Primary Care</a>
                        </li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Surgical
                                Services</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Mental Health</a>
                        </li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Maternity
                                Care</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Diagnostic
                                Services</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact Information</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <div class="w-5 h-5 flex items-center justify-center text-primary mt-1 mr-3">
                                <i class="ri-map-pin-line"></i>
                            </div>
                            <a href="https://www.google.com/maps/search/123+Healthcare+Avenue,+Medical+District,+New+York,+NY+10001" 
                                class="text-gray-400 hover:text-white transition duration-300" 
                                id="address" 
                                name="address"
                                target="_blank">123 Healthcare Avenue, Medical District, New York, NY 10001</a>
                        </li>

                        <li class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-primary mr-3">
                                <i class="ri-phone-line"></i>
                            </div>
                            <a href="tel:+201026955789" class="text-gray-400 hover:text-white transition duration-300" id="phone-number" name="phone-number">+1 (555) 123-4567</a>
                        </li>

                        <li class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-primary mr-3">
                                <i class="ri-mail-line"></i>
                            </div>
                            <a href="mailto:info@medora.com" class="text-gray-400 hover:text-white transition duration-300" id="email-address" name="email-address">info@medora.com</a>
                        </li>

                        <li class="flex items-center">
                            <div class="w-5 h-5 flex items-center justify-center text-primary mr-3">
                                <i class="ri-time-line"></i>
                            </div>
                            <span class="text-gray-400">24/7 Emergency Services</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p class="text-gray-400 text-sm mb-4 md:mb-0"> 2025 MEDora Healthcare. All rights reserved.</p>
                    <div class="flex space-x-6">
                        <a href="#" class="text-gray-400 hover:text-white text-sm transition duration-300">Privacy
                            Policy</a>
                        <a href="#" class="text-gray-400 hover:text-white text-sm transition duration-300">Terms of
                            Service</a>
                        <a href="#" class="text-gray-400 hover:text-white text-sm transition duration-300">Cookie
                            Policy</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Mobile Menu Structure -->
    <div id="mobile-menu" class="mobile-menu">
        <!-- Regular menu items -->
        <a href="../Guests/home.html" class="flex items-center">
            <i class="ri-home-line mr-2 text-primary"></i>
            Home
        </a>
        
        <!-- Services Dropdown -->
        <div class="dropdown2">
            <a href="#" class="flex items-center justify-start" id="mobile-services-menu">
                <div class="flex items-center">
                    <i class="ri-service-line mr-2 text-primary"></i>
                    Our Services
                </div>
                <i id="services-mobile-arrow" class="ri-arrow-down-s-line ml-2 transition-transform duration-300"></i>
            </a>
            <div class="dropdown-content2 hidden"> <!-- Added 'hidden' class here -->
                <div class="grid grid-cols-2 gap-4 p-2"> <!-- Wrapped grid in a container -->
                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
                        <i class="ri-heart-pulse-line mr-2 text-red-500"></i>
                        Emergency & Critical Care
                    </a>
                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
                        <i class="ri-medicine-bottle-line mr-2 text-blue-500"></i>
                        Support Services
                    </a>
                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
                        <i class="ri-hospital-line mr-2 text-purple-500"></i>
                        Specialized Units
                    </a>
                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
                        <i class="ri-parent-line mr-2 text-green-500"></i>
                        Maternity & Childcare
                    </a>
                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
                        <i class="ri-stethoscope-line mr-2 text-yellow-500"></i>
                        Outpatient Services
                    </a>
                    <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
                        <i class="ri-surgical-mask-line mr-2 text-indigo-500"></i>
                        Surgical Services
                    </a>
                </div>
            </div>
        </div>
        <!-- Other menu items -->
        <a href="../Guests/find-doctor.html" class="flex items-center">
            <i class="ri-user-search-line mr-2 text-primary"></i>
            Find Doctor
        </a>
        <a href="../Guests/blog.html" class="flex items-center">
            <i class="ri-article-line mr-2 text-primary"></i>
            Blog
        </a>
        <a href="../Guests/reviews.html" class="flex items-center">
            <i class="ri-star-line mr-2 text-primary"></i>
            Reviews
        </a>
        <a href="../Guests/contact.html" class="flex items-center">
            <i class="ri-contacts-line mr-2 text-primary"></i>
            Contact
        </a>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">Confirm Action</h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <p class="text-gray-600 mb-6">Are you sure you want to decline this appointment?</p>
            <div class="flex justify-end space-x-4">
                <button id="cancelAction" class="px-4 py-2 border border-gray-300 rounded-button text-gray-700 hover:bg-gray-50">
                    Cancel
                </button>
                <button id="confirmAction" class="px-4 py-2 bg-red-500 text-white rounded-button hover:bg-red-600">
                    Confirm Decline
                </button>
            </div>
        </div>
    </div>

    <!-- Overlay Modal with Tailwind -->
    <div id="edit-patient-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg shadow-lg p-6 w-[calc(40%-2rem)] text-center">
            <form id="edit-patient-form" onsubmit="return false;">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <!-- Left Side -->
                    <div class="space-y-4">
                        <!-- Photo -->
                        <div class="w-auto rounded border border-gray-300 overflow-hidden">
                            <img id="patient-photo" src="#" alt="Patient Photo"
                                 class="w-full h-full object-cover" />
                        </div>
                    </div>
                
                    <!-- Right Side -->
                    <div class="grid gap-4">
                        <div class="relative">
                            <input type="text" name="id" placeholder="ID" readonly
                            class="w-full p-2 border border-gray-300 rounded bg-gray-100 cursor-not-allowed" />
                            <label for="id" class="absolute left-2 transform -translate-y-1/2 text-left text-primary bg-gradient-to-b from-white to-gray-100">ID</label>
                        </div>
                        <div class="relative">
                            <input type="text" name="name" placeholder="Name" readonly
                            class="w-full p-2 border border-gray-300 rounded bg-gray-100 cursor-not-allowed" />
                            <label for="name" class="absolute left-2 transform -translate-y-1/2 text-left text-primary bg-gradient-to-b from-white to-gray-100">Name</label>
                        </div>
                        <div class="relative">
                            <input type="number" name="age" placeholder="Age" readonly
                            class="w-full p-2 border border-gray-300 rounded bg-gray-100 cursor-not-allowed" />
                            <label for="age" class="absolute left-2 transform -translate-y-1/2 text-left text-primary bg-gradient-to-b from-white to-gray-100">Age</label>
                        </div>
                        <div class="relative">
                            <input type="text" name="gender" placeholder="Gender" readonly
                            class="w-full p-2 border border-gray-300 rounded bg-gray-100 cursor-not-allowed" />
                            <label for="gender" class="absolute left-2 transform -translate-y-1/2 text-left text-primary bg-gradient-to-b from-white to-gray-100">Gender</label>
                        </div>
                        <div class="relative">
                            <input type="date" name="lastVisit" readonly
                            class="w-full p-2 border border-gray-300 rounded bg-gray-100 cursor-not-allowed" />
                            <label for="lastVisit" class="absolute left-2 transform -translate-y-1/2 text-left text-primary bg-gradient-to-b from-white to-gray-100">Last Visit</label>
                        </div>
                        <div class="relative">
                            <input type="text" name="condition" placeholder="Condition"
                            class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                            <label for="condition" class="absolute left-2 transform -translate-y-1/2 text-left text-primary bg-white">Condition</label>
                        </div>
                    </div>
                </div>
                

                <div class="flex justify-center space-x-4 mt-4">
                    <button type="button" id="confirm-btn" disabled
                        class="bg-blue-600 text-white px-4 py-2 rounded disabled:bg-blue-300 disabled:cursor-not-allowed transition">
                        Confirm
                    </button>
                    <button type="button" id="cancel-btn"
                        class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition">
                        Cancel
                    </button>
                </div>
                <div id="confirmation-message" class="mt-3 font-semibold text-green-600 hidden">
                    Condition updated successfully!
                </div>
            </form>
        </div>
    </div>
  
    
    <!-- Alert Notification -->
    <div id="alert-container" class="fixed top-6 left-1/2 transform -translate-x-1/2 w-full max-w-md space-y-4 z-[9999]"></div>

<script>
    // Initialize Feather Icons
    feather.replace();
    
    // Tab Switching Logic with localStorage persistence
    function setupProfileTabs() {
        // Get all tab elements
        const tabs = document.querySelectorAll('.profile-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Function to activate a tab
        function activateTab(tabId) {
            // Remove active class from all tabs and contents
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            
            // Add active class to clicked tab and corresponding content
            const tab = document.querySelector(`.profile-tab[data-tab="${tabId}"]`);
            const content = document.getElementById(tabId);
            
            if (tab && content) {
                tab.classList.add('active');
                content.classList.add('active');
                
                // Store the active tab in localStorage
                localStorage.setItem('activeTab', tabId);
            }
        }
        
        // Check for saved tab on page load
        const savedTab = localStorage.getItem('activeTab');
        if (savedTab) {
            activateTab(savedTab);
        } else {
            // Default to first tab if none saved
            activateTab(tabs[0].dataset.tab);
        }
        
        // Add click event listeners
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                activateTab(tab.dataset.tab);
            });
        });
    }

    // Mobile Menu Functionality
    function setupMobileMenu() {
        const mobileMenuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const mobileServicesMenu = document.getElementById("mobile-services-menu");
        const mobileDropdownContent = document.querySelector(".dropdown-content2");
        const menuIcon = document.getElementById("menu-icon");
        const servicesMobileArrow = document.getElementById("services-mobile-arrow");
        
        // Mobile profile and notification elements
        const mobileProfileBtn = document.getElementById("mobile-profile-btn");
        const mobileProfileDropdown = document.getElementById("mobile-profile-dropdown");
        const mobileNotificationBtn = document.getElementById("mobile-notification-btn");
        const mobileNotificationDropdown = document.getElementById("mobile-notification-dropdown");

        function handleScreenSize() {
            if (window.innerWidth >= 767) { // md breakpoint
                mobileMenu.classList.remove("active");
                mobileDropdownContent.classList.remove("active");
                menuIcon.classList.remove("ri-close-line");
                menuIcon.classList.add("ri-menu-line");
            }
        }

        // Initial check
        handleScreenSize();

        // Add resize event listener
        window.addEventListener("resize", handleScreenSize);

        // Toggle mobile menu
        mobileMenuButton.addEventListener('click', (e) => {
            e.stopPropagation();
            mobileMenu.classList.toggle('active');
            menuIcon.classList.toggle('ri-menu-line');
            menuIcon.classList.toggle('ri-close-line');
            // Close other dropdowns when menu opens
            if (mobileMenu.classList.contains('active')) {
                mobileProfileDropdown.classList.add('hidden');
                mobileNotificationDropdown.classList.add('hidden');
            }
        });

        // Services dropdown toggle
        mobileServicesMenu.addEventListener("click", function(e) {
            e.preventDefault();
            e.stopPropagation();
            mobileDropdownContent.classList.toggle("active");
            servicesMobileArrow.classList.toggle("rotate-180");
        });

        // Mobile profile dropdown toggle
        mobileProfileBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            mobileProfileDropdown.classList.toggle('hidden');
            mobileNotificationDropdown.classList.add('hidden');
            mobileMenu.classList.remove('active');
            menuIcon.classList.remove('ri-close-line');
            menuIcon.classList.add('ri-menu-line');
        });

        // Mobile notification dropdown toggle
        mobileNotificationBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            mobileNotificationDropdown.classList.toggle('hidden');
            mobileProfileDropdown.classList.add('hidden');
            mobileMenu.classList.remove('active');
            menuIcon.classList.remove('ri-close-line');
            menuIcon.classList.add('ri-menu-line');
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!mobileProfileBtn.contains(e.target) && !mobileProfileDropdown.contains(e.target)) {
                mobileProfileDropdown.classList.add('hidden');
            }
            if (!mobileNotificationBtn.contains(e.target) && !mobileNotificationDropdown.contains(e.target)) {
                mobileNotificationDropdown.classList.add('hidden');
            }
            if (!mobileMenuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
                mobileMenu.classList.remove('active');
                menuIcon.classList.remove('ri-close-line');
                menuIcon.classList.add('ri-menu-line');
                mobileDropdownContent.classList.remove("active");
                servicesMobileArrow.classList.remove("rotate-180");
            }
        });

        // Prevent dropdowns from closing when clicking inside
        mobileProfileDropdown.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        mobileNotificationDropdown.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    }

    // Appointment Management
    function setupAppointmentManagement() {
        let appointmentToRemove = null;
        
        function showModal(row) {
            appointmentToRemove = row;
            document.getElementById('confirmationModal').classList.remove('hidden');
        }
        
        function hideModal() {
            document.getElementById('confirmationModal').classList.add('hidden');
        }
        
        function showAlert(message, type = "success", duration = 4000) {
            const container = document.getElementById("alert-container");

            // Icon SVGs
            const icons = {
            success: `<i class="fas fa-check-circle text-green-700"></i>`,
            error: `<i class="fas fa-times-circle text-red-700"></i>`,
            warning: `<i class="fas fa-exclamation-triangle text-yellow-700"></i>`,
            info: `<i class="fas fa-info-circle text-blue-700"></i>`,
            };

            // Color mapping
            const colors = {
            success: {
                bg: "bg-green-100",
                text: "text-green-700",
                strip: "bg-green-600",
                progress: "bg-green-600",
                hover: "hover:bg-green-200",
            },
            error: {
                bg: "bg-red-100",
                text: "text-red-700",
                strip: "bg-red-600",
                progress: "bg-red-600",
                hover: "hover:bg-red-200",
            },
            warning: {
                bg: "bg-yellow-100",
                text: "text-yellow-800",
                strip: "bg-yellow-600",
                progress: "bg-yellow-600",
                hover: "hover:bg-yellow-200",
            },
            info: {
                bg: "bg-blue-100",
                text: "text-blue-700",
                strip: "bg-blue-600",
                progress: "bg-blue-600",
                hover: "hover:bg-blue-200",
            },
            };

            const { bg, text, strip, progress, hover } = colors[type] || colors.success;
            const icon = icons[type] || "";

            // Create alert element
            const alert = document.createElement("div");
            alert.className = `relative flex items-stretch shadow-md rounded-md overflow-hidden opacity-0 transition-opacity duration-300 ${bg} ${text}`;
            alert.innerHTML = `
            <!-- Left Strip -->
            <div class="w-2 ${strip}"></div>

            <!-- Icon & Message -->
            <div class="flex-1 flex items-center gap-2 px-4 py-3">
                ${icon}
                <span class="text-sm">${message}</span>
            </div>

            <!-- Close button -->
            <button class="absolute top-2.5 right-2.5 w-6 h-6 rounded-full flex items-center justify-center ${hover} transition duration-200">
                <i class="fas fa-times text-sm text-gray-500 hover:text-gray-600 transition-colors font-bold "></i>
            </button>

            <!-- Progress bar -->
            <div class="absolute bottom-0 left-0 h-1 ${progress}" style="width: 100%; transition: width ${duration}ms linear;"></div>
            `;

            container.appendChild(alert);

            // Trigger fade-in
            requestAnimationFrame(() => {
            alert.classList.remove("opacity-0");
            alert.querySelector("div.absolute.bottom-0").style.width = "0%";
            });

            // Auto-remove after time
            const timeout = setTimeout(() => removeAlert(), duration);

            // Manual close
            alert.querySelector("button").addEventListener("click", () => {
            clearTimeout(timeout);
            removeAlert();
            });

            function removeAlert() {
            alert.classList.add("opacity-0");
            setTimeout(() => {
                alert.remove();
            }, 300);
            }
        }
        
        // Add click handlers to all decline buttons
        document.querySelectorAll('.decline-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const row = this.closest('tr');
                showModal(row);
            });
        });
        
        // Modal button handlers
        document.getElementById('closeModal').addEventListener('click', hideModal);
        document.getElementById('cancelAction').addEventListener('click', hideModal);
        
        document.getElementById('confirmAction').addEventListener('click', function() {
            if (appointmentToRemove) {
                appointmentToRemove.remove();
                showAlert("Appointment cancelled successfully", "success", 4000);
                hideModal();
            }
        });
    }

    // Desktop Dropdowns
    function setupDesktopDropdowns() {
        // Services dropdown
        const servicesMenu = document.getElementById("services-menu");
        const servicesDropdown = document.getElementById("services-dropdown");
        const servicesArrow = document.getElementById("services-arrow");

        if (servicesMenu) {
            servicesMenu.addEventListener("click", function(e) {
                e.preventDefault();
                servicesDropdown.classList.toggle("hidden");
                servicesArrow.classList.toggle("rotate-180");
            });

            document.addEventListener("click", function(e) {
                if (!servicesMenu.contains(e.target) && !servicesDropdown.contains(e.target)) {
                    servicesDropdown.classList.add("hidden");
                    servicesArrow.classList.remove("rotate-180");
                }
            });
        }

        // Profile dropdown
        const profileBtn = document.getElementById('profile-btn');
        const profileDropdown = document.getElementById('profile-dropdown');
        const notificationBtn = document.getElementById('notification-btn');
        const notificationDropdown = document.getElementById('notification-dropdown');

        if (profileBtn) {
            profileBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                profileDropdown.classList.toggle('hidden');
                notificationDropdown.classList.add('hidden');
            });
        }

        if (notificationBtn) {
            notificationBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationDropdown.classList.toggle('hidden');
                profileDropdown.classList.add('hidden');
            });
        }

        document.addEventListener('click', function() {
            if (profileDropdown) profileDropdown.classList.add('hidden');
            if (notificationDropdown) notificationDropdown.classList.add('hidden');
        });

        if (profileDropdown) {
            profileDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }

        if (notificationDropdown) {
            notificationDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
    }

    // Detect overflowing containers and add 'overflowing' class
    function setupScrollbars() {
            const containers = document.querySelectorAll('.dynamic-scrollbar');
            
            containers.forEach(container => {
                function checkOverflow() {
                    if (container.scrollHeight > container.clientHeight) {
                        container.classList.add('overflowing');
                    } else {
                        container.classList.remove('overflowing');
                    }
                }
                
                // Check initially
                checkOverflow();
                
                // Check when window resizes
                window.addEventListener('resize', checkOverflow);
                
                // Check when content changes (for dynamic content like notes)
                const observer = new MutationObserver(checkOverflow);
                observer.observe(container, { childList: true, subtree: true });
            });
        }

    // Calendar functionality
    function setupCalendar() {
        const calendarDays = document.getElementById('calendar-days');
        const currentMonthElement = document.getElementById('current-month');
        const prevMonthButton = document.getElementById('prev-month');
        const nextMonthButton = document.getElementById('next-month');
        
        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();
        
        // For demo purposes, set to a future date where we have data
        currentDate = new Date(2025, 3, 15); // April 15, 2025
        currentMonth = currentDate.getMonth();
        currentYear = currentDate.getFullYear();
        
        // Doctor availability data
        const doctorAvailability = {
            // Format: 'YYYY-MM-DD': { morning: true/false, afternoon: true/false, evening: true/false }
            '2025-04-15': { morning: true, afternoon: true, evening: false },
            '2025-04-16': { morning: true, afternoon: true, evening: false },
            '2025-04-17': { morning: false, afternoon: true, evening: true },
            '2025-04-18': { morning: true, afternoon: false, evening: false },
            '2025-04-19': { morning: false, afternoon: false, evening: false }, // Weekend
            '2025-04-20': { morning: false, afternoon: false, evening: false }, // Weekend
            '2025-04-21': { morning: true, afternoon: true, evening: false },
            '2025-04-22': { morning: true, afternoon: true, evening: false },
            '2025-04-23': { morning: true, afternoon: false, evening: true },
            '2025-04-24': { morning: false, afternoon: true, evening: false },
            '2025-04-25': { morning: true, afternoon: true, evening: false }
        };
        
        // Sample appointments
        const appointments = [
            {
                id: 'APT-001',
                date: '2025-04-15',
                time: '10:00 AM',
                patientName: 'Milla Willow',
                purpose: 'Hypertension Follow-up',
                status: 'confirmed'
            },
            {
                id: 'APT-002',
                date: '2025-04-16',
                time: '2:30 PM',
                patientName: 'John Smith',
                purpose: 'Diabetes Checkup',
                status: 'confirmed'
            },
            {
                id: 'APT-003',
                date: '2025-04-17',
                time: '11:15 AM',
                patientName: 'Emma Johnson',
                purpose: 'Asthma Consultation',
                status: 'pending'
            }
        ];
        
        function updateCalendar() {
            // Update month display
            currentMonthElement.textContent = new Date(currentYear, currentMonth, 1).toLocaleDateString('en-US', {
                month: 'long',
                year: 'numeric'
            });
            
            // Clear calendar
            calendarDays.innerHTML = '';
            
            // Get first day of month
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            
            // Get last day of month
            const lastDay = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Get current day (for highlighting today)
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            const todayDate = today.getDate();
            
            // Add empty cells for days before first day of month
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'bg-white p-2 min-h-[80px]';
                calendarDays.appendChild(emptyCell);
            }
            
            // Add cells for each day of the month
            for (let day = 1; day <= lastDay; day++) {
                const cell = document.createElement('div');
                cell.className = 'bg-white p-2 min-h-[80px] relative';
                
                // Highlight current day
                if (isCurrentMonth && day === todayDate) {
                    cell.classList.add('bg-blue-50');
                }
                
                // Date number
                const dateNumber = document.createElement('div');
                dateNumber.className = 'text-right mb-1';
                dateNumber.textContent = day;
                cell.appendChild(dateNumber);
                
                // Format date for checking availability
                const dateString = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                // Check for availability and appointments
                const availability = doctorAvailability[dateString];
                const dayAppointments = appointments.filter(apt => apt.date === dateString);
                
                // Availability indicators
                if (availability) {
                    const availabilityContainer = document.createElement('div');
                    availabilityContainer.className = 'flex flex-col space-y-1 mt-1';
                    
                    if (availability.morning) {
                        const morningIndicator = document.createElement('div');
                        morningIndicator.className = 'text-xs px-1 py-0.5 rounded bg-blue-100 text-blue-800 text-center';
                        morningIndicator.textContent = 'AM';
                        availabilityContainer.appendChild(morningIndicator);
                    }
                    
                    if (availability.afternoon) {
                        const afternoonIndicator = document.createElement('div');
                        afternoonIndicator.className = 'text-xs px-1 py-0.5 rounded bg-blue-100 text-blue-800 text-center';
                        afternoonIndicator.textContent = 'PM';
                        availabilityContainer.appendChild(afternoonIndicator);
                    }
                    
                    if (availability.evening) {
                        const eveningIndicator = document.createElement('div');
                        eveningIndicator.className = 'text-xs px-1 py-0.5 rounded bg-blue-100 text-blue-800 text-center';
                        eveningIndicator.textContent = 'EVE';
                        availabilityContainer.appendChild(eveningIndicator);
                    }
                    
                    cell.appendChild(availabilityContainer);
                }
                
                // Add appointment indicators if there are any
                if (dayAppointments.length > 0) {
                    const appointmentCount = dayAppointments.length;
                    const maxToShow = 2;
                    
                    for (let i = 0; i < Math.min(appointmentCount, maxToShow); i++) {
                        const apt = dayAppointments[i];
                        const apptIndicator = document.createElement('div');
                        
                        // Style based on status
                        if (apt.status === 'confirmed') {
                            apptIndicator.className = 'mt-1 text-xs px-1 py-0.5 rounded bg-green-100 text-green-800 truncate';
                        } else if (apt.status === 'pending') {
                            apptIndicator.className = 'mt-1 text-xs px-1 py-0.5 rounded bg-yellow-100 text-yellow-800 truncate';
                        } else {
                            apptIndicator.className = 'mt-1 text-xs px-1 py-0.5 rounded bg-gray-100 text-gray-800 truncate';
                        }
                        
                        apptIndicator.textContent = `${apt.time}: ${apt.patientName.split(' ')[0]}`;
                        cell.appendChild(apptIndicator);
                    }
                    
                    // Show more indicator if there are more appointments
                    if (appointmentCount > maxToShow) {
                        const moreIndicator = document.createElement('div');
                        moreIndicator.className = 'mt-1 text-xs text-center text-gray-500';
                        moreIndicator.textContent = `+${appointmentCount - maxToShow} more`;
                        cell.appendChild(moreIndicator);
                    }
                }
                
                // Add click handler to show day detail
                cell.addEventListener('click', function() {
                    showDayDetail(dateString);
                });
                
                calendarDays.appendChild(cell);
            }
            
            // Update today's appointments section
            updateTodayAppointments();
        }
        
        // Show appointment details for a specific day
        function showDayDetail(dateString) {
            // Format date for display
            const dateObj = new Date(dateString);
            const formattedDate = dateObj.toLocaleDateString('en-US', {
                weekday: 'long',
                month: 'long',
                day: 'numeric',
                year: 'numeric'
            });
            
            // Get appointments for the selected day
            const dayAppointments = appointments.filter(apt => apt.date === dateString);
            
            // Get availability for the selected day
            const availability = doctorAvailability[dateString] || { morning: false, afternoon: false, evening: false };
            
            // Create modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            // Format availability text
            let availabilityText = '';
            if (availability.morning) availabilityText += 'Morning, ';
            if (availability.afternoon) availabilityText += 'Afternoon, ';
            if (availability.evening) availabilityText += 'Evening, ';
            availabilityText = availabilityText.replace(/, $/, '');
            
            if (!availabilityText) {
                availabilityText = 'Not available';
            }
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-lg w-full">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">${formattedDate}</h3>
                        <button class="close-modal text-gray-500 hover:text-gray-700">
                            <i class="ri-close-line"></i>
                        </button>
                    </div>
                    <div class="mb-4">
                        <p class="text-sm text-gray-700"><strong>Availability:</strong> ${availabilityText}</p>
                    </div>
                    <div class="mb-6">
                        <h4 class="text-md font-medium text-gray-800 mb-3">Appointments (${dayAppointments.length})</h4>
                        ${dayAppointments.length === 0 ? 
                            '<p class="text-sm text-gray-500">No appointments scheduled for this day.</p>' : 
                            `<div class="space-y-3">${dayAppointments.map(apt => `
                                <div class="flex items-center p-3 border border-gray-200 rounded-md">
                                    <div class="flex-shrink-0 h-10 w-10">
                                        <img class="h-10 w-10 rounded-full object-cover" src="../assets/images/patients/${apt.patientName.toLowerCase().replace(' ', '-')}.jpg" alt="${apt.patientName}">
                                    </div>
                                    <div class="ml-4 flex-grow">
                                        <div class="flex justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">${apt.patientName}</p>
                                                <p class="text-xs text-gray-500">${apt.time} - ${apt.purpose}</p>
                                            </div>
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                                                apt.status === 'confirmed' ? 'bg-green-100 text-green-800' : 
                                                apt.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 
                                                'bg-gray-100 text-gray-800'
                                            }">${apt.status}</span>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}</div>`
                        }
                    </div>
                    <div class="flex justify-between items-center">
                        <button id="update-availability-btn" class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark">
                            Update Availability
                        </button>
                        <button id="new-appointment-calendar-btn" class="px-4 py-2 border border-primary text-primary rounded-button hover:bg-primary-50" ${!availability.morning && !availability.afternoon && !availability.evening ? 'disabled' : ''}>
                            New Appointment
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal event
            modal.querySelector('.close-modal').addEventListener('click', function() {
                document.body.removeChild(modal);
            });
            
            // Update availability button
            modal.querySelector('#update-availability-btn').addEventListener('click', function() {
                showUpdateAvailabilityModal(dateString, availability);
                document.body.removeChild(modal);
            });
            
            // New appointment button
            const newAppointmentBtn = modal.querySelector('#new-appointment-calendar-btn');
            if (!newAppointmentBtn.hasAttribute('disabled')) {
                newAppointmentBtn.addEventListener('click', function() {
                    showNewAppointmentModal(dateString);
                    document.body.removeChild(modal);
                });
            }
        }
        
        // Show modal to update availability
        function showUpdateAvailabilityModal(dateString, currentAvailability) {
            const dateObj = new Date(dateString);
            const formattedDate = dateObj.toLocaleDateString('en-US', {
                weekday: 'long',
                month: 'long',
                day: 'numeric',
                year: 'numeric'
            });
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-md w-full">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Update Availability: ${formattedDate}</h3>
                        <button class="close-modal text-gray-500 hover:text-gray-700">
                            <i class="ri-close-line"></i>
                        </button>
                    </div>
                    <div class="mb-6 space-y-4">
                        <div class="flex items-center">
                            <input type="checkbox" id="morning-availability" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" ${currentAvailability.morning ? 'checked' : ''}>
                            <label for="morning-availability" class="ml-2 block text-sm text-gray-700">Morning (8:00 AM - 12:00 PM)</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="afternoon-availability" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" ${currentAvailability.afternoon ? 'checked' : ''}>
                            <label for="afternoon-availability" class="ml-2 block text-sm text-gray-700">Afternoon (1:00 PM - 5:00 PM)</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="evening-availability" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" ${currentAvailability.evening ? 'checked' : ''}>
                            <label for="evening-availability" class="ml-2 block text-sm text-gray-700">Evening (6:00 PM - 9:00 PM)</label>
                        </div>
                        
                        <div class="flex items-center mt-4">
                            <input type="checkbox" id="apply-to-weekday" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                            <label for="apply-to-weekday" class="ml-2 block text-sm text-gray-700">Apply to all ${dateObj.toLocaleDateString('en-US', { weekday: 'long' })}s this month</label>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button class="close-modal px-4 py-2 border border-gray-300 rounded-button text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button id="save-availability" data-date="${dateString}" class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark">
                            Save Changes
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal event
            modal.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
            });
            
            // Save availability event
            document.getElementById('save-availability').addEventListener('click', function() {
                const dateStr = this.dataset.date;
                const applyToWeekday = document.getElementById('apply-to-weekday').checked;
                
                const newAvailability = {
                    morning: document.getElementById('morning-availability').checked,
                    afternoon: document.getElementById('afternoon-availability').checked,
                    evening: document.getElementById('evening-availability').checked
                };
                
                // Update availability for this date
                doctorAvailability[dateStr] = newAvailability;
                
                // If apply to all weekdays of the same type is checked
                if (applyToWeekday) {
                    const date = new Date(dateStr);
                    const dayOfWeek = date.getDay();
                    const year = date.getFullYear();
                    const month = date.getMonth();
                    const lastDay = new Date(year, month + 1, 0).getDate();
                    
                    // Loop through all days in the month
                    for (let i = 1; i <= lastDay; i++) {
                        const currDate = new Date(year, month, i);
                        // If same day of week
                        if (currDate.getDay() === dayOfWeek) {
                            const currDateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                            // Only update if not the same as the original date
                            if (currDateStr !== dateStr) {
                                doctorAvailability[currDateStr] = { ...newAvailability };
                            }
                        }
                    }
                }
                
                // Update calendar
                updateCalendar();
                
                // Show success message
                showAlert('Availability updated successfully', 'success');
                
                document.body.removeChild(modal);
            });
        }
        
        // Show modal to create new appointment from calendar
        function showNewAppointmentModal(dateString) {
            const dateObj = new Date(dateString);
            const formattedDate = dateObj.toLocaleDateString('en-US', {
                weekday: 'long',
                month: 'long',
                day: 'numeric',
                year: 'numeric'
            });
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-md w-full">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">New Appointment for ${formattedDate}</h3>
                        <button class="close-modal text-gray-500 hover:text-gray-700">
                            <i class="ri-close-line"></i>
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Patient</label>
                            <select id="new-appointment-patient" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                ${patients.map(patient => `
                                    <option value="${patient.id}">${patient.name} (${patient.id})</option>
                                `).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
                            <select id="new-appointment-time" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                <option value="08:00">8:00 AM</option>
                                <option value="09:00">9:00 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="13:00">1:00 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="16:00">4:00 PM</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Purpose</label>
                            <input type="text" id="new-appointment-purpose" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary" placeholder="e.g. Routine Checkup">
                        </div>
                    </div>
                    <div class="flex justify-end space-x-4 mt-6">
                        <button class="close-modal px-4 py-2 border border-gray-300 rounded-button text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button id="create-appointment" class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark">
                            Create Appointment
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal event
            modal.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
            });
            
            // Create appointment event
            document.getElementById('create-appointment').addEventListener('click', function() {
                const patientId = document.getElementById('new-appointment-patient').value;
                const time = document.getElementById('new-appointment-time').value;
                const purpose = document.getElementById('new-appointment-purpose').value.trim();
                
                if (!patientId || !purpose) {
                    showAlert('Please fill in all required fields', 'error');
                    return;
                }
                
                // Get patient info
                const patient = patients.find(p => p.id === patientId);
                if (!patient) {
                    showAlert('Invalid patient selected', 'error');
                    return;
                }
                
                // Format time (add AM/PM)
                const timeParts = time.split(':');
                let hours = parseInt(timeParts[0]);
                const minutes = timeParts[1];
                const ampm = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12;
                hours = hours ? hours : 12; // the hour '0' should be '12'
                const formattedTime = `${hours}:${minutes} ${ampm}`;
                
                // Generate new appointment ID
                const newId = `APT-${String(appointments.length + 1).padStart(3, '0')}`;
                
                // Create new appointment
                const newAppointment = {
                    id: newId,
                    date: dateString,
                    time: formattedTime,
                    patientId: patient.id,
                    patientName: patient.name,
                    purpose: purpose,
                    status: 'confirmed'
                };
                
                // Add to appointments array
                appointments.push(newAppointment);
                
                // Re-render calendar
                updateCalendar();
                
                // Show success alert
                showAlert('Appointment created successfully', 'success');
                
                document.body.removeChild(modal);
            });
        }
        
        // Update today's appointments section
        function updateTodayAppointments() {
            const todayDate = new Date(currentYear, currentMonth, currentDate.getDate()).toISOString().split('T')[0];
            const todayAppts = appointments.filter(apt => apt.date === todayDate);
            
            const todayAppointmentsSection = document.getElementById('today-appointments');
            const todayAppointmentsList = document.getElementById('today-appointments-list');
            
            // Show or hide section based on if there are appointments
            if (todayAppts.length > 0) {
                todayAppointmentsSection.classList.remove('hidden');
                
                // Clear and rebuild list
                todayAppointmentsList.innerHTML = '';
                
                // Sort by time
                todayAppts.sort((a, b) => {
                    const timeA = new Date(`2000-01-01T${a.time.replace(/am|pm/i, '')}`).getTime();
                    const timeB = new Date(`2000-01-01T${b.time.replace(/am|pm/i, '')}`).getTime();
                    return timeA - timeB;
                });
                
                // Add each appointment
                todayAppts.forEach(apt => {
                    todayAppointmentsList.innerHTML += `
                        <div class="flex items-center p-4 border border-gray-200 rounded-md hover:bg-gray-50">
                            <div class="flex-shrink-0">
                                <div class="flex h-12 w-12 items-center justify-center rounded-full bg-primary-50 text-primary">
                                    <i class="ri-calendar-check-line text-xl"></i>
                                </div>
                            </div>
                            <div class="ml-4 flex-grow">
                                <div class="flex justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-900">${apt.time}</p>
                                        <p class="text-xs text-gray-500">${apt.purpose}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-sm font-medium text-gray-900">${apt.patientName}</p>
                                        <p class="text-xs text-gray-500">ID: ${apt.patientId}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="ml-4">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                                    apt.status === 'confirmed' ? 'bg-green-100 text-green-800' : 
                                    apt.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 
                                    'bg-gray-100 text-gray-800'
                                }">${apt.status}</span>
                            </div>
                        </div>
                    `;
                });
            } else {
                todayAppointmentsSection.classList.add('hidden');
            }
        }
        
        // Calendar navigation
        prevMonthButton.addEventListener('click', function() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            updateCalendar();
        });
        
        nextMonthButton.addEventListener('click', function() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            updateCalendar();
        });
        
        // Initialize calendar
        updateCalendar();
    }

    // Reviews section
    function setupReviewsSection() {
        const reviews = [
            {
                name: "James Peterson",
                rating: 5,
                image: "https://randomuser.me/api/portraits/men/25.jpg",
                time: "2 weeks ago",
                text: "Dr. Johnson is exceptional! She took the time to thoroughly explain my condition and treatment options. Her approach is both professional and compassionate, making me feel at ease during my appointments. Highly recommend!"
            },
            {
                name: "Sarah Williams",
                rating: 4,
                image: "https://randomuser.me/api/portraits/women/25.jpg",
                time: "1 month ago",
                text: "I've been a patient of Dr. Johnson for over a year now, and she's always been attentive and knowledgeable. The only reason for 4 stars instead of 5 is sometimes the wait times can be a bit long. Otherwise, her medical care is top-notch!"
            },
            {
                name: "Michael Rodriguez",
                rating: 5,
                image: "https://randomuser.me/api/portraits/men/25.jpg",
                time: "2 months ago",
                text: "Dr. Johnson literally saved my life. After multiple misdiagnoses from other doctors, she quickly identified my heart condition and got me the treatment I needed. She explains everything clearly and follows up regularly. I can't recommend her enough!"
            },
            {
                name: "Emma Chen",
                rating: 3,
                image: "https://randomuser.me/api/portraits/women/25.jpg",
                time: "3 months ago",
                text: "Dr. Johnson is knowledgeable but her office staff could be more organized. I've had issues with scheduling and billing more than once. The medical care itself is good, but the administrative side needs improvement."
            },
            { 
                name: 'David Kim',
                rating: 5, 
                image: 'https://randomuser.me/api/portraits/men/50.jpg',
                time: '4 months ago', 
                text: 'Excellent cardiologist!', 
            },
            { 
                name: 'Lisa Thompson', 
                rating: 4, 
                image: 'https://randomuser.me/api/portraits/women/25.jpg',
                time: '5 months ago', 
                text: 'Very professional and caring doctor.', 
            }
        ];

        const reviewsPerPage = 3; // Now you can change this to any number!
        let currentPage = 1;
        let currentFilter = 'all';

        const reviewsContainer = document.getElementById('reviews-container');
        const filterSelect = document.getElementById('review-filter');
        const pageNumbersContainer = document.getElementById('page-numbers');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const prevMobile = document.getElementById('prev-mobile');
        const nextMobile = document.getElementById('next-mobile');
        const showingRange = document.getElementById('showing-range-lg');
        const totalResults = document.getElementById('total-reviews'); //  FIXED ID

        function renderStars(rating) {
            return Array.from({ length: 5 }, (_, i) => 
                `<i class="ri-star${i < rating ? '-fill' : '-line'}"></i>`
            ).join('');
        }

        function getFilteredReviews() {
            return currentFilter === 'all' ? reviews : reviews.filter(r => r.rating === parseInt(currentFilter));
        }

        function renderReviews() {
            const filtered = getFilteredReviews();
            const start = (currentPage - 1) * reviewsPerPage;
            const end = start + reviewsPerPage;
            const pageReviews = filtered.slice(start, end);

            reviewsContainer.innerHTML = pageReviews.map(review => `
                <div class="review-item border-b border-gray-200 pb-6" data-rating="${review.rating}">
                    <div class="flex justify-between items-start">
                        <div class="flex items-start">
                            <img src="${review.image}" alt="Patient" class="h-10 w-10 rounded-full object-cover">
                            <div class="ml-4">
                                <h4 class="text-md font-medium text-gray-900">${review.name}</h4>
                                <div class="flex text-yellow-400 mt-1">${renderStars(review.rating)}</div>
                            </div>
                        </div>
                        <span class="text-sm text-gray-500">${review.time}</span>
                    </div>
                    <p class="mt-3 text-gray-700">${review.text}</p>
                </div>
            `).join('');

            updateReviewRange(currentPage, reviewsPerPage, filtered.length);
            renderPaginationButtons(filtered.length);
        }

        function renderPaginationButtons(totalFiltered) {
            const totalPages = Math.ceil(totalFiltered / reviewsPerPage);
            pageNumbersContainer.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                btn.className = `relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i === currentPage ? 'bg-primary text-white' : 'bg-white text-gray-700'} border-gray-300 hover:bg-gray-50`;
                btn.addEventListener('click', () => {
                    currentPage = i;
                    renderReviews();
                });
                pageNumbersContainer.appendChild(btn);
            }

            const disablePrev = currentPage === 1;
            const disableNext = currentPage === totalPages || totalPages === 0;

            prevBtn.disabled = disablePrev;
            nextBtn.disabled = disableNext;
            prevMobile.disabled = disablePrev;
            nextMobile.disabled = disableNext;
        }

        function updateReviewRange(currentPage, pageSize, totalReviews) {
            const start = (currentPage - 1) * pageSize + 1;
            const end = Math.min(currentPage * pageSize, totalReviews);
            showingRange.textContent = `${start}${end}`;
            totalResults.textContent = totalReviews;
        }

        filterSelect.addEventListener('change', () => {
            currentFilter = filterSelect.value;
            currentPage = 1;
            renderReviews();
        });

        [prevBtn, prevMobile].forEach(btn => btn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderReviews();
            }
        }));

        [nextBtn, nextMobile].forEach(btn => btn.addEventListener('click', () => {
            const total = getFilteredReviews().length;
            if (currentPage < Math.ceil(total / reviewsPerPage)) {
                currentPage++;
                renderReviews();
            }
        }));

        renderReviews();
    }
    
    // Patient Table Functionality
    function initPatientTable() {
        const patients = [
            {
            name: "Ali Hassan",
            id: "P001",
            age: 30,
            lastVisit: "2024-12-15",
            condition: "Diabetes",
            gender: "male",
            photo: "https://randomuser.me/api/portraits/men/1.jpg"
            },
            {
            name: "Sara Mostafa",
            id: "P002",
            age: 25,
            lastVisit: "2025-01-10",
            condition: "Asthma",
            gender: "female",
            photo: "https://randomuser.me/api/portraits/women/2.jpg"
            },
            {
            name: "Mohamed Salah",
            id: "P003",
            age: 40,
            lastVisit: "2024-11-22",
            condition: "Hypertension",
            gender: "male",
            photo: "https://randomuser.me/api/portraits/men/3.jpg"
            },
            {
            name: "Layla Ahmed",
            id: "P004",
            age: 35,
            lastVisit: "2025-03-01",
            condition: "Anxiety",
            gender: "female",
            photo: "https://randomuser.me/api/portraits/women/4.jpg"
            },
            {
            name: "Milla Willow",
            id: "P005",
            age: 22,
            lastVisit: "2025-04-15",
            condition: "Cancer",
            gender: "female",
            photo: "https://randomuser.me/api/portraits/women/5.jpg"
            },
            {
            name: "Mohamed El-Sayed",
            id: "P006",
            age: 40,
            lastVisit: "2024-11-30",
            condition: "Hypertension",
            gender: "male",
            photo: "https://randomuser.me/api/portraits/men/6.jpg"
            },
            {
            name: "John Smith",
            id: "P007",
            age: 45,
            lastVisit: "2025-04-10",
            condition: "Diabetes",
            gender: "male",
            photo: "https://randomuser.me/api/portraits/men/7.jpg"
            }
        ];

        let currentSearch = localStorage.getItem("search") || "";
        let filters = {
            gender: localStorage.getItem("gender") || "",
            date: localStorage.getItem("date") || ""
        };
        let currentSort = {
            column: localStorage.getItem("sortColumn") || "",
            direction: localStorage.getItem("sortDirection") || ""
        };
        let currentPage = parseInt(localStorage.getItem("currentPage")) || 1;
        const rowsPerPage = 5;

        const tbody = document.querySelector("#patients-tbody");
        const searchInput = document.querySelector("#patient-search-input");
        const genderSelect = document.querySelector("#patient-gender-filter");
        const dateInput = document.querySelector("#patient-date-filter");
        const clearBtn = document.querySelector("#clear-patient-filters");
        const showingRange = document.querySelectorAll("#patient-showing-range");
        const totalCount = document.querySelectorAll("#patient-total-count");
        const sortButtons = document.querySelectorAll(".sort-btn");
        const prevBtn = document.querySelector("#patient-prev-btn");
        const nextBtn = document.querySelector("#patient-next-btn");
        const pageNumbers = document.querySelector("#patient-page-numbers");

        function applyFilters(data) {
            return data
                .filter(p => {
                    return (
                        p.name.toLowerCase().includes(currentSearch.toLowerCase()) ||
                        p.id.toLowerCase().includes(currentSearch.toLowerCase()) ||
                        p.condition.toLowerCase().includes(currentSearch.toLowerCase())
                    );
                })
                .filter(p => (filters.gender ? p.gender === filters.gender : true))
                .filter(p => (filters.date ? p.lastVisit === filters.date : true));
        }

        function applySort(data) {
            if (!currentSort.column) return data;

            return [...data].sort((a, b) => {
                if (a[currentSort.column] < b[currentSort.column]) return currentSort.direction === "asc" ? -1 : 1;
                if (a[currentSort.column] > b[currentSort.column]) return currentSort.direction === "asc" ? 1 : -1;
                return 0;
            });
        }

        function paginate(data) {
            const start = (currentPage - 1) * rowsPerPage;
            return data.slice(start, start + rowsPerPage);
        }

        function renderTable() {
            let filtered = applyFilters(patients);
            let sorted = applySort(filtered);
            let paginated = paginate(sorted);

            tbody.innerHTML = "";
            paginated.forEach(p => {
                tbody.innerHTML += `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2">
                            <img src="${p.photo}" alt="${p.name}" class="w-8 h-8 rounded-full">
                            ${p.name}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.id}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.age}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.lastVisit}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.condition}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm cursor-pointer flex gap-2">
                            <button class="view-patient-button" data-id="${p.id}">
                                <i class="ri-eye-line text-primary"></i>
                            </button>
                            <button class="edit-patient-button" data-id="${p.id}">
                                <i class="ri-pencil-line text-primary"></i>
                            </button>
                            <button class="delete-patient-button" data-id="${p.id}">
                                <i class="ri-delete-bin-line text-red-500"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });

            // Add event listeners to edit buttons AFTER rendering
            document.querySelectorAll('.edit-patient-button').forEach(button => {
                button.addEventListener('click', () => {
                    const patientId = button.getAttribute('data-id');
                    const patient = patients.find(p => p.id === patientId);
                    if (!patient) return alert("Patient not found!");

                    // Fill modal inputs with patient data
                    const modal = document.getElementById('edit-patient-modal');
                    modal.style.display = 'flex';

                    const form = modal.querySelector('#edit-patient-form');
                    form.id.value = patient.id;
                    form.name.value = patient.name;
                    form.age.value = patient.age;
                    form.lastVisit.value = patient.lastVisit;
                    form.condition.value = patient.condition;
                    form.gender.value = patient.gender;
                    // Update photo dynamically:
                    const photoImg = modal.querySelector('#patient-photo');
                    photoImg.src = patient.photo || 'https://via.placeholder.com/80';
                    photoImg.alt = patient.name;

                    // Enable confirm button only if condition input changes
                    const conditionInput = form.condition;
                    const confirmBtn = form.querySelector('#confirm-btn');
                    confirmBtn.disabled = true;

                    conditionInput.addEventListener('input', () => {
                        confirmBtn.disabled = conditionInput.value.trim() === patient.condition.trim();
                    });

                    // Confirm button action
                    confirmBtn.onclick = () => {
                        patient.condition = conditionInput.value.trim();
                        confirmBtn.disabled = true;
                        // Show success message
                        const msg = form.querySelector('#confirmation-message');
                        msg.classList.remove('hidden');
                        // Update table or re-render as needed
                        renderTable();
                        // Hide message after 2 seconds and close modal
                        setTimeout(() => {
                            msg.classList.add('hidden');
                            modal.style.display = 'none';
                        }, 2000);
                    };

                    // Cancel button action
                    const cancelBtn = form.querySelector('#cancel-btn');
                    cancelBtn.onclick = () => {
                        modal.style.display = 'none';
                    };
                });
            });

            const total = filtered.length;
            const start = (currentPage - 1) * rowsPerPage + 1;
            const end = Math.min(start + rowsPerPage - 1, total);
            showingRange.forEach(el => el.textContent = `${start}-${end}`);
            totalCount.forEach(el => el.textContent = total);

            // Pagination buttons
            renderPagination(Math.ceil(total / rowsPerPage));
        }

        function renderPagination(totalPages) {
            pageNumbers.innerHTML = "";
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement("button");
                btn.textContent = i;
                btn.className = `px-3 py-1 border text-sm ${i === currentPage ? "bg-primary text-white" : "bg-white text-gray-700"} hover:bg-gray-100`;
                btn.addEventListener("click", () => {
                    currentPage = i;
                    localStorage.setItem("currentPage", currentPage);
                    renderTable();
                });
                pageNumbers.appendChild(btn);
            }

            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
        }

        // Event Listeners
        searchInput.value = currentSearch;
        searchInput.addEventListener("input", e => {
            currentSearch = e.target.value;
            localStorage.setItem("search", currentSearch);
            currentPage = 1;
            renderTable();
        });

        genderSelect.value = filters.gender;
        genderSelect.addEventListener("change", e => {
            filters.gender = e.target.value;
            localStorage.setItem("gender", filters.gender);
            currentPage = 1;
            renderTable();
        });

        dateInput.value = filters.date;
        dateInput.addEventListener("change", e => {
            filters.date = e.target.value;
            localStorage.setItem("date", filters.date);
            currentPage = 1;
            renderTable();
        });

        clearBtn.addEventListener("click", () => {
            filters = { gender: "", date: "" };
            localStorage.removeItem("gender");
            localStorage.removeItem("date");
            genderSelect.value = "";
            dateInput.value = "";
            renderTable();
        });

        sortButtons.forEach(btn => {
            btn.addEventListener("click", () => {
                const col = btn.dataset.column;
                if (currentSort.column === col) {
                    currentSort.direction = currentSort.direction === "asc" ? "desc" : "asc";
                } else {
                    currentSort.column = col;
                    currentSort.direction = "asc";
                }
                localStorage.setItem("sortColumn", currentSort.column);
                localStorage.setItem("sortDirection", currentSort.direction);
                renderTable();
            });
        });

        prevBtn.addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                localStorage.setItem("currentPage", currentPage);
                renderTable();
            }
        });

        nextBtn.addEventListener("click", () => {
            currentPage++;
            localStorage.setItem("currentPage", currentPage);
            renderTable();
        });

        // Initial render
        renderTable();
    }

    // Setup Update Availability button
    function setupUpdateAvailabilityButton() {
            const updateAvailabilityBtn = document.getElementById('main-update-availability');
            if (!updateAvailabilityBtn) return;
            
            updateAvailabilityBtn.addEventListener('click', function() {
                // Get today's date
                const today = new Date();
                
                // For demo purposes, use a date where we have availability data (April 15, 2025)
                const demoDate = new Date(2025, 3, 15);
                const dateString = demoDate.toISOString().split('T')[0];
                
                // Get availability for this date
                const availability = doctorAvailability[dateString] || { morning: false, afternoon: false, evening: false };
                
                // Show update availability modal
                showUpdateAvailabilityModal(dateString, availability);
            });
        }
    
    // Setup Prescription Management
    function setupPrescriptionManagement() {
            // Sample prescriptions data
            const prescriptions = [
                {
                    id: 'PRE-001',
                    date: '2025-04-15',
                    patientId: 'MDF-P001',
                    patientName: 'Milla Willow',
                    patientImage: '../assets/images/Admin pages/Doctors page/Milla Willow_Admin.jpg',
                    medication: 'Lisinopril 10mg',
                    instructions: 'Take once daily in the morning',
                    status: 'active',
                    statusClass: 'bg-green-100 text-green-800'
                },
                {
                    id: 'PRE-002',
                    date: '2025-04-10',
                    patientId: 'MDF-P002',
                    patientName: 'John Smith',
                    patientImage: '../assets/images/patients/john-smith.jpg',
                    medication: 'Metformin 500mg',
                    instructions: 'Take twice daily with meals',
                    status: 'active',
                    statusClass: 'bg-green-100 text-green-800'
                },
                {
                    id: 'PRE-003',
                    date: '2025-03-28',
                    patientId: 'MDF-P003',
                    patientName: 'Emma Johnson',
                    patientImage: '../assets/images/patients/emma-johnson.jpg',
                    medication: 'Albuterol Inhaler',
                    instructions: 'Use as needed for asthma symptoms',
                    status: 'active',
                    statusClass: 'bg-green-100 text-green-800'
                }
            ];

            // Render prescriptions
            function renderPrescriptions() {
                const prescriptionsTable = document.querySelector('#prescriptions tbody');
                if (!prescriptionsTable) return;
                
                prescriptionsTable.innerHTML = '';
                
                prescriptions.forEach(prescription => {
                    prescriptionsTable.innerHTML += `
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${prescription.date}</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10">
                                        <img class="h-10 w-10 rounded-full object-cover" src="${prescription.patientImage}" alt="${prescription.patientName}">
                                    </div>
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-gray-900">${prescription.patientName}</div>
                                        <div class="text-sm text-gray-500">ID: ${prescription.patientId}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${prescription.medication}</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${prescription.statusClass}">${prescription.status}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <a href="#" class="text-primary hover:text-primary-dark mr-3 view-prescription" data-prescription-id="${prescription.id}"><i class="ri-eye-line"></i></a>
                                <a href="#" class="text-teal-500 hover:text-blue-700 mr-3 edit-prescription" data-prescription-id="${prescription.id}"><i class="ri-edit-line"></i></a>
                                <a href="#" class="text-red-500 hover:text-red-700 print-prescription" data-prescription-id="${prescription.id}"><i class="ri-printer-line"></i></a>
                            </td>
                        </tr>
                    `;
                });
                
                // Add event listeners to view buttons
                document.querySelectorAll('.view-prescription').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const prescriptionId = this.dataset.prescriptionId;
                        viewPrescription(prescriptionId);
                    });
                });
                
                // Add event listeners to edit buttons
                document.querySelectorAll('.edit-prescription').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const prescriptionId = this.dataset.prescriptionId;
                        editPrescription(prescriptionId);
                    });
                });
                
                // Add event listeners to print buttons
                document.querySelectorAll('.print-prescription').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const prescriptionId = this.dataset.prescriptionId;
                        printPrescription(prescriptionId);
                    });
                });
            }
            
            // View prescription details
            function viewPrescription(prescriptionId) {
                const prescription = prescriptions.find(p => p.id === prescriptionId);
                if (!prescription) return;
                
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg p-6 max-w-md w-full">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Prescription Details</h3>
                            <button class="close-modal text-gray-500 hover:text-gray-700">
                                <i class="ri-close-line"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Patient</label>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10">
                                        <img class="h-10 w-10 rounded-full object-cover" src="${prescription.patientImage}" alt="${prescription.patientName}">
                                    </div>
                                    <div class="ml-3">
                                        <div class="text-sm font-medium text-gray-900">${prescription.patientName}</div>
                                        <div class="text-sm text-gray-500">ID: ${prescription.patientId}</div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                                <p class="text-sm text-gray-900">${prescription.date}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Medication</label>
                                <p class="text-sm text-gray-900">${prescription.medication}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Instructions</label>
                                <p class="text-sm text-gray-900">${prescription.instructions}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${prescription.statusClass}">${prescription.status}</span>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-4 mt-6">
                            <button class="close-modal px-4 py-2 border border-gray-300 rounded-button text-gray-700 hover:bg-gray-50">
                                Close
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Close modal event
                modal.querySelectorAll('.close-modal').forEach(button => {
                    button.addEventListener('click', function() {
                        document.body.removeChild(modal);
                    });
                });
            }
            
            // Edit prescription
            function editPrescription(prescriptionId) {
                const prescription = prescriptions.find(p => p.id === prescriptionId);
                if (!prescription) return;
                
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg p-6 max-w-md w-full">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Edit Prescription</h3>
                            <button class="close-modal text-gray-500 hover:text-gray-700">
                                <i class="ri-close-line"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Patient</label>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10">
                                        <img class="h-10 w-10 rounded-full object-cover" src="${prescription.patientImage}" alt="${prescription.patientName}">
                                    </div>
                                    <div class="ml-3">
                                        <div class="text-sm font-medium text-gray-900">${prescription.patientName}</div>
                                        <div class="text-sm text-gray-500">ID: ${prescription.patientId}</div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                                <input type="date" id="edit-prescription-date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary" value="${prescription.date}">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Medication</label>
                                <input type="text" id="edit-prescription-medication" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary" value="${prescription.medication}">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Instructions</label>
                                <textarea id="edit-prescription-instructions" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">${prescription.instructions}</textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                <select id="edit-prescription-status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                    <option value="active" ${prescription.status === 'active' ? 'selected' : ''}>Active</option>
                                    <option value="expired" ${prescription.status === 'expired' ? 'selected' : ''}>Expired</option>
                                    <option value="discontinued" ${prescription.status === 'discontinued' ? 'selected' : ''}>Discontinued</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-4 mt-6">
                            <button class="close-modal px-4 py-2 border border-gray-300 rounded-button text-gray-700 hover:bg-gray-50">
                                Cancel
                            </button>
                            <button id="save-prescription" class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark">
                                Save Changes
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Close modal event
                modal.querySelectorAll('.close-modal').forEach(button => {
                    button.addEventListener('click', function() {
                        document.body.removeChild(modal);
                    });
                });
                
                // Save prescription event
                document.getElementById('save-prescription').addEventListener('click', function() {
                    const date = document.getElementById('edit-prescription-date').value;
                    const medication = document.getElementById('edit-prescription-medication').value.trim();
                    const instructions = document.getElementById('edit-prescription-instructions').value.trim();
                    const status = document.getElementById('edit-prescription-status').value;
                    
                    if (!date || !medication || !instructions) {
                        showAlert('Please fill in all required fields', 'error');
                        return;
                    }
                    
                    // Update prescription
                    prescription.date = date;
                    prescription.medication = medication;
                    prescription.instructions = instructions;
                    prescription.status = status;
                    
                    // Update status class
                    let statusClass = '';
                    switch(status) {
                        case 'active':
                            statusClass = 'bg-green-100 text-green-800';
                            break;
                        case 'expired':
                            statusClass = 'bg-gray-100 text-gray-800';
                            break;
                        case 'discontinued':
                            statusClass = 'bg-red-100 text-red-800';
                            break;
                    }
                    prescription.statusClass = statusClass;
                    
                    // Re-render prescriptions
                    renderPrescriptions();
                    
                    // Show success message
                    showAlert('Prescription updated successfully', 'success');
                    
                    document.body.removeChild(modal);
                });
            }
            
            
            
            // New prescription button
            const newPrescriptionBtn = document.querySelector('#prescriptions button');
            if (newPrescriptionBtn) {
                newPrescriptionBtn.addEventListener('click', function() {
                    const modal = document.createElement('div');
                    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    modal.innerHTML = `
                        <div class="bg-white rounded-lg p-6 max-w-md w-full">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">New Prescription</h3>
                                <button class="close-modal text-gray-500 hover:text-gray-700">
                                    <i class="ri-close-line"></i>
                                </button>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Patient</label>
                                    <select id="new-prescription-patient" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                        ${patients.map(patient => `
                                            <option value="${patient.id}">${patient.name} (${patient.id})</option>
                                        `).join('')}
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                                    <input type="date" id="new-prescription-date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Medication</label>
                                    <input type="text" id="new-prescription-medication" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary" placeholder="e.g. Lisinopril 10mg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Instructions</label>
                                    <textarea id="new-prescription-instructions" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary" placeholder="e.g. Take once daily with food"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <select id="new-prescription-status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                        <option value="active" selected>Active</option>
                                        <option value="expired">Expired</option>
                                        <option value="discontinued">Discontinued</option>
                                    </select>
                                </div>
                            </div>
                            <div class="flex justify-end space-x-4 mt-6">
                                <button class="close-modal px-4 py-2 border border-gray-300 rounded-button text-gray-700 hover:bg-gray-50">
                                    Cancel
                                </button>
                                <button id="create-prescription" class="px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-dark">
                                    Create Prescription
                                </button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(modal);
                    
                    // Set default date to today
                    const today = new Date();
                    document.getElementById('new-prescription-date').value = today.toISOString().split('T')[0];
                    
                    // Close modal event
                    modal.querySelectorAll('.close-modal').forEach(button => {
                        button.addEventListener('click', function() {
                            document.body.removeChild(modal);
                        });
                    });
                    
                    // Create prescription event
                    document.getElementById('create-prescription').addEventListener('click', function() {
                        const patientId = document.getElementById('new-prescription-patient').value;
                        const date = document.getElementById('new-prescription-date').value;
                        const medication = document.getElementById('new-prescription-medication').value.trim();
                        const instructions = document.getElementById('new-prescription-instructions').value.trim();
                        const status = document.getElementById('new-prescription-status').value;
                        
                        if (!patientId || !date || !medication || !instructions) {
                            showAlert('Please fill in all required fields', 'error');
                            return;
                        }
                        
                        // Get patient info
                        const patient = patients.find(p => p.id === patientId);
                        if (!patient) {
                            showAlert('Invalid patient selected', 'error');
                            return;
                        }
                        
                        // Generate new prescription ID
                        const newId = `PRE-${String(prescriptions.length + 1).padStart(3, '0')}`;
                        
                        // Create status class
                        let statusClass = '';
                        switch (status) {
                            case 'active':
                                statusClass = 'bg-green-100 text-green-800';
                                break;
                            case 'expired':
                                statusClass = 'bg-gray-100 text-gray-800';
                                break;
                            case 'discontinued':
                                statusClass = 'bg-red-100 text-red-800';
                                break;
                        }
                        
                        // Create new prescription
                        const newPrescription = {
                            id: newId,
                            date: date,
                            patientId: patient.id,
                            patientName: patient.name,
                            patientImage: patient.image,
                            medication: medication,
                            instructions: instructions,
                            status: status,
                            statusClass: statusClass
                        };
                        
                        // Add to prescriptions array
                        prescriptions.push(newPrescription);
                        
                        // Re-render prescriptions
                        renderPrescriptions();
                        
                        // Show success alert
                        showAlert('Prescription created successfully', 'success');
                        
                        document.body.removeChild(modal);
                    });
                });
            }
            
            // Initialize prescriptions
            renderPrescriptions();
        }
        
    // Initialize all functionality
    document.addEventListener('DOMContentLoaded', function() {
            // Core UI components
            setupProfileTabs();
            setupMobileMenu();
            setupDesktopDropdowns();
            setupScrollbars();
            
            // Data and functionality
            setupAppointmentManagement();
            setupCalendar();
            initPatientTable();
            filterPatients();
            setupPagination();
            initPagination();
            setupUpdateAvailabilityButton();
            setupPrescriptionManagement();
            
            // UI components that depend on data
            setupReviewsSection();
        });
    
        window.addEventListener("DOMContentLoaded", () => {
            setupReviewsSection();
            initPatientTable();

        });

        const toggleFilterBtn = document.getElementById("toggle-advanced-filter");
        const advancedFilterSection = document.getElementById("advanced-filter-section");
        const toggleIcon = document.getElementById("toggle-icon");

        toggleFilterBtn.addEventListener("click", () => {
            if (advancedFilterSection.classList.contains("hidden")) {
                advancedFilterSection.classList.remove("hidden");
                toggleIcon.classList.add("rotate-180");
            } else {
                advancedFilterSection.classList.add("hidden");
                toggleIcon.classList.remove("rotate-180");
            }
        });

</script>
</body>
</html>